<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nesti - Plateforme Familiale Inclusive</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* ========== VARIABLES ET RESET ========== */
        :root {
            --primary: #136bb1;
            --primary-light: #1c9dea;
            --primary-dark: #0a4a7a;
            --accent: #ffd166;
            --accent-dark: #e6b650;
            --success: #29c48a;
            --warning: #ffb347;
            --danger: #ff6b6b;
            --text: #0f172a;
            --text-light: #64748b;
            --bg: #f4fbff;
            --card: #ffffff;
            --card-dark: #f1f5f9;
            --border: #e2e8f0;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1);
            --radius: 12px;
            --radius-lg: 18px;
            --transition: all 0.3s ease;
            --sidebar-width: 280px;
            --header-height: 80px;
        }

        [data-theme="dark"] {
            --primary: #1c9dea;
            --primary-light: #4ab3ff;
            --primary-dark: #136bb1;
            --accent: #ffd166;
            --accent-dark: #e6b650;
            --success: #29c48a;
            --warning: #ffb347;
            --danger: #ff6b6b;
            --text: #f1f5f9;
            --text-light: #94a3b8;
            --bg: #0f172a;
            --card: #1e293b;
            --card-dark: #1a2438;
            --border: #334155;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            transition: var(--transition);
            overflow-x: hidden;
        }

        /* ========== LAYOUT PRINCIPAL ========== */
        .app {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: var(--sidebar-width);
            background: var(--card);
            box-shadow: var(--shadow);
            padding: 20px;
            display: flex;
            flex-direction: column;
            transition: var(--transition);
            z-index: 100;
            position: fixed;
            height: 100vh;
            overflow-y: auto;
        }

        .main-content {
            flex: 1;
            margin-left: var(--sidebar-width);
            padding: 30px;
            transition: var(--transition);
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--border);
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(12, 1fr);
            gap: 24px;
        }

        /* ========== COMPOSANTS ========== */
        .card {
            background: var(--card);
            border-radius: var(--radius);
            padding: 24px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .card:hover {
            box-shadow: var(--shadow-lg);
            transform: translateY(-2px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .card-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--text);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 10px 16px;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            border: none;
            gap: 8px;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
        }

        .btn-secondary {
            background: var(--card-dark);
            color: var(--text);
        }

        .btn-secondary:hover {
            background: var(--border);
        }

        .btn-accent {
            background: var(--accent);
            color: var(--text);
        }

        .btn-accent:hover {
            background: var(--accent-dark);
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.875rem;
        }

        .input {
            width: 100%;
            padding: 12px 16px;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            background: var(--card);
            color: var(--text);
            font-size: 1rem;
            transition: var(--transition);
        }

        .input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(28, 157, 234, 0.2);
        }

        /* ========== SIDEBAR ========== */
        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 32px;
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 20px;
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 800;
            color: var(--primary);
        }

        .nav {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 32px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            border-radius: var(--radius);
            color: var(--text-light);
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
        }

        .nav-item:hover {
            background: var(--card-dark);
            color: var(--text);
        }

        .nav-item.active {
            background: linear-gradient(90deg, rgba(28, 157, 234, 0.1), transparent);
            color: var(--primary);
            border-left: 4px solid var(--primary);
        }

        .nav-item i {
            width: 20px;
            text-align: center;
        }

        .user-profile {
            margin-top: auto;
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-weight: 700;
            font-size: 0.95rem;
        }

        .user-role {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        /* ========== DASHBOARD ========== */
        .welcome-banner {
            grid-column: span 12;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            border-radius: var(--radius);
            padding: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .welcome-text h1 {
            font-size: 1.8rem;
            margin-bottom: 8px;
        }

        .welcome-text p {
            opacity: 0.9;
        }

        .stats-grid {
            grid-column: span 12;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: var(--card);
            border-radius: var(--radius);
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .stat-icon.events {
            background: rgba(28, 157, 234, 0.1);
            color: var(--primary);
        }

        .stat-icon.tasks {
            background: rgba(255, 209, 102, 0.1);
            color: var(--accent-dark);
        }

        .stat-icon.chat {
            background: rgba(41, 196, 138, 0.1);
            color: var(--success);
        }

        .stat-icon.wellbeing {
            background: rgba(255, 107, 107, 0.1);
            color: var(--danger);
        }

        .stat-info {
            flex: 1;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .calendar-widget {
            grid-column: span 4;
        }

        .chat-widget {
            grid-column: span 5;
        }

        .wellbeing-widget {
            grid-column: span 3;
        }

        /* ========== CALENDRIER ========== */
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .calendar-nav {
            display: flex;
            gap: 8px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
        }

        .calendar-weekday {
            text-align: center;
            font-weight: 600;
            font-size: 0.8rem;
            color: var(--text-light);
            padding: 8px;
        }

        .calendar-day {
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
        }

        .calendar-day:hover {
            background: var(--card-dark);
        }

        .calendar-day.today {
            background: var(--primary);
            color: white;
            font-weight: 700;
        }

        .calendar-day.has-event::after {
            content: '';
            position: absolute;
            bottom: 4px;
            width: 4px;
            height: 4px;
            border-radius: 50%;
            background: var(--primary);
        }

        .calendar-day.selected {
            background: var(--primary-light);
            color: white;
        }

        .calendar-day.other-month {
            color: var(--text-light);
            opacity: 0.5;
        }

        .events-list {
            margin-top: 20px;
        }

        .event-item {
            display: flex;
            gap: 12px;
            padding: 12px;
            border-radius: var(--radius);
            margin-bottom: 8px;
            background: var(--card-dark);
            transition: var(--transition);
        }

        .event-item:hover {
            background: var(--border);
        }

        .event-time {
            font-weight: 700;
            color: var(--primary);
            min-width: 60px;
        }

        .event-details {
            flex: 1;
        }

        .event-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .event-description {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        /* ========== CHAT ========== */
        .chat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .chat-messages {
            height: 300px;
            overflow-y: auto;
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 16px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .message {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 18px;
            position: relative;
        }

        .message.user {
            align-self: flex-end;
            background: var(--primary);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message.bot {
            align-self: flex-start;
            background: var(--card-dark);
            color: var(--text);
            border-bottom-left-radius: 4px;
        }

        .message-time {
            font-size: 0.7rem;
            opacity: 0.7;
            margin-top: 4px;
            text-align: right;
        }

        .message-suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        .suggestion {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            cursor: pointer;
        }

        .chat-input-container {
            display: flex;
            gap: 12px;
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border-radius: var(--radius);
            border: 1px solid var(--border);
            background: var(--card);
            color: var(--text);
        }

        .chat-send {
            width: 50px;
            height: 50px;
            borderRadius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: none;
            transition: var(--transition);
        }

        .chat-send:hover {
            background: var(--primary-dark);
        }

        /* ========== BIEN-ÊTRE ========== */
        .wellbeing-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .wellbeing-stat {
            background: var(--card-dark);
            border-radius: var(--radius);
            padding: 16px;
            text-align: center;
        }

        .wellbeing-value {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .wellbeing-label {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .meditation-controls {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .meditation-timer {
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            margin: 16px 0;
            color: var(--primary);
        }

        .meditation-button {
            padding: 12px;
            border-radius: var(--radius);
            background: var(--primary);
            color: white;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .meditation-button:hover {
            background: var(--primary-dark);
        }

        .meditation-button.stop {
            background: var(--danger);
        }

        .meditation-button.stop:hover {
            background: #e05555;
        }

        /* ========== TÂCHES ========== */
        .tasks-widget {
            grid-column: span 4;
        }

        .task-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .task-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            transition: var(--transition);
        }

        .task-item:hover {
            background: var(--border);
        }

        .task-checkbox {
            width: 20px;
            height: 20px;
            border-radius: 6px;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .task-checkbox.checked {
            background: var(--success);
            border-color: var(--success);
            color: white;
        }

        .task-details {
            flex: 1;
        }

        .task-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .task-meta {
            display: flex;
            gap: 12px;
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .task-priority {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 700;
        }

        .priority-high {
            background: rgba(255, 107, 107, 0.2);
            color: var(--danger);
        }

        .priority-medium {
            background: rgba(255, 179, 71, 0.2);
            color: var(--warning);
        }

        .priority-low {
            background: rgba(41, 196, 138, 0.2);
            color: var(--success);
        }

        /* ========== ACTIVITÉS ========== */
        .activities-widget {
            grid-column: span 4;
        }

        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .activity-item {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            transition: var(--transition);
        }

        .activity-item:hover {
            background: var(--border);
            transform: translateY(-2px);
        }

        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .activity-title {
            font-weight: 700;
            margin-bottom: 4px;
        }

        .activity-location {
            font-size: 0.9rem;
            color: var(--text-light);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .activity-rating {
            display: flex;
            align-items: center;
            gap: 4px;
            background: rgba(255, 209, 102, 0.2);
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 0.8rem;
            font-weight: 700;
            color: var(--accent-dark);
        }

        .activity-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 6px;
            margin-top: 12px;
        }

        .activity-tag {
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 700;
            background: rgba(28, 157, 234, 0.1);
            color: var(--primary);
        }

        /* ========== MODALS ========== */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            pointer-events: none;
            transition: var(--transition);
        }

        .modal-overlay.active {
            opacity: 1;
            pointer-events: all;
        }

        .modal {
            background: var(--card);
            border-radius: var(--radius);
            width: 90%;
            max-width: 500px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
            transform: translateY(20px);
            transition: var(--transition);
        }

        .modal-overlay.active .modal {
            transform: translateY(0);
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
        }

        .modal-title {
            font-size: 1.25rem;
            font-weight: 700;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
            position: absolute;
            top: 15px;
            right: 15px;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-form {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .form-label {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .form-actions {
            display: flex;
            gap: 12px;
            justify-content: flex-end;
            margin-top: 16px;
        }

        /* ========== NOTIFICATIONS ========== */
        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 16px 20px;
            border-radius: var(--radius);
            background: var(--card);
            box-shadow: var(--shadow-lg);
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(100%);
            opacity: 0;
            transition: var(--transition);
            z-index: 1000;
        }

        .notification.active {
            transform: translateX(0);
            opacity: 1;
        }

        .notification-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 0.8rem;
        }

        .notification-icon.success {
            background: var(--success);
        }

        .notification-icon.error {
            background: var(--danger);
        }

        .notification-icon.warning {
            background: var(--warning);
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 700;
            margin-bottom: 4px;
        }

        .notification-message {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .notification-close {
            background: none;
            border: none;
            color: var(--text-light);
            cursor: pointer;
        }

        /* ========== RESPONSIVE ========== */
        @media (max-width: 1200px) {
            .dashboard-grid {
                grid-template-columns: repeat(6, 1fr);
            }
            
            .calendar-widget,
            .chat-widget,
            .wellbeing-widget,
            .tasks-widget,
            .activities-widget {
                grid-column: span 6;
            }
        }

        @media (max-width: 900px) {
            .sidebar {
                transform: translateX(-100%);
                position: fixed;
                z-index: 1000;
            }
            
            .sidebar.active {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .menu-toggle {
                display: block;
            }
        }

        @media (max-width: 600px) {
            .main-content {
                padding: 16px;
            }
            
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .calendar-widget,
            .chat-widget,
            .wellbeing-widget,
            .tasks-widget,
            .activities-widget {
                grid-column: span 1;
            }
            
            .welcome-banner {
                flex-direction: column;
                text-align: center;
                gap: 16px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ========== ANIMATIONS ========== */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideIn {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .animate-fadeIn {
            animation: fadeIn 0.5s ease;
        }

        .animate-slideIn {
            animation: slideIn 0.5s ease;
        }

        .animate-pulse {
            animation: pulse 2s infinite;
        }

        /* ========== ACCESSIBILITY ========== */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Focus styles */
        button:focus,
        input:focus,
        select:focus,
        textarea:focus {
            outline: 2px solid var(--primary);
            outline-offset: 2px;
        }

        /* High contrast mode support */
        @media (prefers-contrast: high) {
            :root {
                --text: #000;
                --text-light: #333;
                --bg: #fff;
                --card: #f8f8f8;
                --card-dark: #eee;
                --border: #ccc;
            }
            
            [data-theme="dark"] {
                --text: #fff;
                --text-light: #ccc;
                --bg: #000;
                --card: #111;
                --card-dark: #222;
                --border: #444;
            }
        }

        /* Reduced motion support */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* ========== NOUVEAUX STYLES ========== */
        .hidden {
            display: none !important;
        }

        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .family-members {
            display: flex;
            gap: 12px;
            margin-top: 16px;
        }

        .family-member {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
        }

        .member-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            cursor: pointer;
        }

        .member-name {
            font-size: 0.8rem;
        }

        .progress-bar {
            height: 8px;
            background: var(--card-dark);
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .filter-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .filter-btn {
            padding: 6px 12px;
            border-radius: 20px;
            background: var(--card-dark);
            border: none;
            cursor: pointer;
            font-size: 0.9rem;
            transition: var(--transition);
        }

        .filter-btn.active {
            background: var(--primary);
            color: white;
        }

        .context-menu {
            position: absolute;
            background: var(--card);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            overflow: hidden;
        }

        .context-menu-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: var(--transition);
        }

        .context-menu-item:hover {
            background: var(--card-dark);
        }

        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 700;
        }

        .badge-primary {
            background: rgba(28, 157, 234, 0.1);
            color: var(--primary);
        }

        .badge-success {
            background: rgba(41, 196, 138, 0.1);
            color: var(--success);
        }

        .badge-warning {
            background: rgba(255, 179, 71, 0.1);
            color: var(--warning);
        }

        .badge-danger {
            background: rgba(255, 107, 107, 0.1);
            color: var(--danger);
        }

        .dropdown {
            position: relative;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--card);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            min-width: 150px;
            overflow: hidden;
            display: none;
        }

        .dropdown-menu.show {
            display: block;
        }

        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: var(--transition);
        }

        .dropdown-item:hover {
            background: var(--card-dark);
        }

        .tab-container {
            margin-top: 20px;
        }

        .tab-header {
            display: flex;
            border-bottom: 1px solid var(--border);
        }

        .tab {
            padding: 12px 16px;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 2px solid transparent;
        }

        .tab.active {
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
        }

        .tab-content {
            padding: 16px 0;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        .tooltip {
            position: relative;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            padding: 6px 12px;
            background: var(--text);
            color: var(--bg);
            border-radius: 4px;
            font-size: 0.8rem;
            white-space: nowrap;
            z-index: 1000;
        }

        .carousel {
            position: relative;
            overflow: hidden;
            border-radius: var(--radius);
        }

        .carousel-inner {
            display: flex;
            transition: transform 0.3s ease;
        }

        .carousel-item {
            min-width: 100%;
        }

        .carousel-control {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
        }

        .carousel-control.prev {
            left: 10px;
        }

        .carousel-control.next {
            right: 10px;
        }

        .pagination {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-top: 16px;
        }

        .page-item {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--border);
            cursor: pointer;
        }

        .page-item.active {
            background: var(--primary);
        }

        .search-box {
            position: relative;
            margin-bottom: 20px;
        }

        .search-input {
            padding-left: 40px;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }

        .sortable-ghost {
            opacity: 0.5;
        }

        .sortable-chosen {
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .drag-handle {
            cursor: move;
            color: var(--text-light);
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-light);
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .color-picker {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .color-option {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .color-option.selected {
            border-color: var(--text);
        }

        .audio-player {
            width: 100%;
            margin-top: 16px;
        }

        .audio-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .audio-progress {
            flex: 1;
            height: 4px;
            background: var(--card-dark);
            border-radius: 2px;
            overflow: hidden;
            cursor: pointer;
        }

        .audio-progress-filled {
            height: 100%;
            background: var(--primary);
        }

        .audio-time {
            font-size: 0.8rem;
            color: var(--text-light);
            min-width: 80px;
            text-align: right;
        }

        .voice-recorder {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .record-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--danger);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: none;
        }

        .record-btn.recording {
            animation: pulse 1s infinite;
        }

        .waveform {
            flex: 1;
            height: 40px;
            background: var(--card-dark);
            border-radius: var(--radius);
            overflow: hidden;
            position: relative;
        }

        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20px;
            background: linear-gradient(to top, var(--primary), transparent);
            opacity: 0.5;
            transform-origin: bottom;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--primary);
            opacity: 0;
            pointer-events: none;
            z-index: 10000;
        }

        .achievement-badge {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            margin: 0 auto 16px;
            box-shadow: var(--shadow-lg);
        }

        .streak-counter {
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--card-dark);
            padding: 8px 12px;
            border-radius: 20px;
        }

        .streak-number {
            font-weight: 700;
            color: var(--accent-dark);
        }

        .habit-tracker {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            margin-top: 16px;
        }

        .habit-day {
            aspect-ratio: 1;
            border-radius: 6px;
            background: var(--card-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .habit-day.completed {
            background: var(--success);
            color: white;
        }

        .habit-day.partial {
            background: linear-gradient(135deg, var(--success) 50%, var(--card-dark) 50%);
        }

        .habit-day.missed {
            background: var(--danger);
            color: white;
        }

        .mood-picker {
            display: flex;
            justify-content: space-between;
            margin-top: 16px;
        }

        .mood-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            opacity: 0.6;
            transition: var(--transition);
        }

        .mood-option:hover,
        .mood-option.selected {
            opacity: 1;
            transform: scale(1.1);
        }

        .mood-emoji {
            font-size: 1.5rem;
        }

        .mood-label {
            font-size: 0.8rem;
        }

        .timeline {
            position: relative;
            padding-left: 20px;
            margin-left: 10px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 20px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -24px;
            top: 6px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--primary);
        }

        .timeline-date {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-bottom: 4px;
        }

        .timeline-content {
            background: var(--card-dark);
            padding: 12px;
            border-radius: var(--radius);
        }

        .interactive-tutorial {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            pointer-events: none;
            transition: var(--transition);
        }

        .interactive-tutorial.active {
            opacity: 1;
            pointer-events: all;
        }

        .tutorial-content {
            background: var(--card);
            border-radius: var(--radius);
            padding: 24px;
            max-width: 400px;
            position: relative;
        }

        .tutorial-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .tutorial-indicators {
            display: flex;
            gap: 6px;
            justify-content: center;
            margin-top: 16px;
        }

        .tutorial-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--border);
        }

        .tutorial-indicator.active {
            background: var(--primary);
        }

        .hotkey-hint {
            display: inline-block;
            padding: 2px 6px;
            background: var(--card-dark);
            border-radius: 4px;
            font-size: 0.8rem;
            margin-left: 8px;
            border: 1px solid var(--border);
        }

        .connection-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            padding: 4px 8px;
            border-radius: 12px;
            background: var(--card-dark);
        }

        .status-online {
            color: var(--success);
        }

        .status-offline {
            color: var(--danger);
        }

        .status-syncing {
            color: var(--warning);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .status-online .status-dot {
            background: var(--success);
        }

        .status-offline .status-dot {
            background: var(--danger);
        }

        .status-syncing .status-dot {
            background: var(--warning);
            animation: pulse 2s infinite;
        }

        .sync-spinner {
            width: 16px;
            height: 16px;
            border: 2px solid var(--border);
            border-top: 2px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .data-sync-info {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .privacy-shield {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 8px;
            background: rgba(41, 196, 138, 0.1);
            color: var(--success);
            border-radius: 12px;
            font-size: 0.8rem;
        }

        .encryption-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 0.7rem;
            color: var(--text-light);
        }

        .data-usage-bar {
            height: 6px;
            background: var(--card-dark);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 8px;
        }

        .data-usage-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 3px;
        }

        .backup-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-top: 12px;
        }

        .backup-status.success {
            border-left: 3px solid var(--success);
        }

        .backup-status.warning {
            border-left: 3px solid var(--warning);
        }

        .backup-status.error {
            border-left: 3px solid var(--danger);
        }

        .backup-icon {
            font-size: 1.2rem;
        }

        .backup-info {
            flex: 1;
        }

        .backup-title {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .backup-details {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .backup-action {
            color: var(--primary);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .family-code {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--card-dark);
            padding: 12px;
            border-radius: var(--radius);
            margin-top: 16px;
        }

        .code-value {
            font-family: monospace;
            font-size: 1.2rem;
            letter-spacing: 2px;
            flex: 1;
            text-align: center;
        }

        .copy-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: var(--radius);
            cursor: pointer;
        }

        .members-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 16px;
        }

        .member-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
        }

        .member-info {
            flex: 1;
        }

        .member-name {
            font-weight: 600;
        }

        .member-role {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .member-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--card);
            border: 1px solid var(--border);
            cursor: pointer;
            transition: var(--transition);
        }

        .action-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .invite-section {
            margin-top: 24px;
        }

        .invite-input-group {
            display: flex;
            gap: 12px;
            margin-top: 12px;
        }

        .invite-input {
            flex: 1;
        }

        .role-select {
            min-width: 120px;
        }

        .permissions-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .permission-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .permission-checkbox {
            width: 18px;
            height: 18px;
            border-radius: 4px;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .permission-checkbox.checked {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .permission-label {
            font-size: 0.9rem;
        }

        .security-log {
            margin-top: 24px;
        }

        .log-item {
            display: flex;
            gap: 12px;
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }

        .log-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--card-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .log-details {
            flex: 1;
        }

        .log-action {
            font-weight: 600;
        }

        .log-meta {
            display: flex;
            gap: 12px;
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 4px;
        }

        .log-date {
            flex: 1;
        }

        .log-ip {
            font-family: monospace;
        }

        .two-factor-setup {
            margin-top: 24px;
        }

        .qrcode-container {
            text-align: center;
            margin: 16px 0;
            padding: 16px;
            background: white;
            border-radius: var(--radius);
            display: inline-block;
        }

        .backup-codes {
            margin-top: 16px;
            background: var(--card-dark);
            padding: 16px;
            border-radius: var(--radius);
        }

        .backup-codes-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-top: 12px;
            font-family: monospace;
        }

        .data-export-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .export-option {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .export-option:hover {
            background: var(--primary);
            color: white;
        }

        .export-icon {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .export-format {
            font-weight: 600;
        }

        .export-info {
            font-size: 0.8rem;
            margin-top: 4px;
        }

        .storage-usage {
            margin-top: 24px;
        }

        .usage-breakdown {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .usage-category {
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
        }

        .usage-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .usage-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .usage-size {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .usage-bar {
            height: 6px;
            background: var(--card);
            border-radius: 3px;
            overflow: hidden;
        }

        .usage-fill {
            height: 100%;
            border-radius: 3px;
        }

        .usage-events .usage-fill {
            background: var(--primary);
        }

        .usage-media .usage-fill {
            background: var(--success);
        }

        .usage-documents .usage-fill {
            background: var(--warning);
        }

        .usage-other .usage-fill {
            background: var(--danger);
        }

        .auto-delete-options {
            margin-top: 16px;
        }

        .auto-delete-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .auto-delete-label {
            flex: 1;
        }

        .auto-delete-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .auto-delete-desc {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 4px;
        }

        .auto-delete-toggle {
            position: relative;
            width: 40px;
            height: 20px;
        }

        .auto-delete-checkbox {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .auto-delete-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--border);
            transition: var(--transition);
            border-radius: 20px;
        }

        .auto-delete-slider::before {
            content: '';
            position: absolute;
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background: white;
            transition: var(--transition);
            border-radius: 50%;
        }

        .auto-delete-checkbox:checked + .auto-delete-slider {
            background: var(--primary);
        }

        .auto-delete-checkbox:checked + .auto-delete-slider::before {
            transform: translateX(20px);
        }

        .privacy-settings {
            margin-top: 24px;
        }

        .privacy-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .privacy-label {
            flex: 1;
        }

        .privacy-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .privacy-desc {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 4px;
        }

        .privacy-select {
            min-width: 120px;
        }

        .data-sources {
            margin-top: 24px;
        }

        .data-source {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .source-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .source-info {
            flex: 1;
        }

        .source-name {
            font-weight: 600;
        }

        .source-status {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .source-action {
            color: var(--primary);
            cursor: pointer;
            font-weight: 600;
        }

        .advanced-settings {
            margin-top: 24px;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .setting-label {
            flex: 1;
        }

        .setting-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .setting-desc {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 4px;
        }

        .setting-control {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .reset-btn {
            padding: 6px 12px;
            background: var(--danger);
            color: white;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
        }

        .danger-zone {
            margin-top: 32px;
            padding: 24px;
            background: rgba(255, 107, 107, 0.1);
            border-radius: var(--radius);
            border: 1px solid var(--danger);
        }

        .danger-title {
            color: var(--danger);
            font-weight: 700;
            margin-bottom: 16px;
        }

        .danger-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .danger-btn {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: white;
            border: 1px solid var(--danger);
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .danger-btn:hover {
            background: var(--danger);
            color: white;
        }

        .danger-btn-content {
            flex: 1;
        }

        .danger-btn-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .danger-btn-desc {
            font-size: 0.8rem;
        }

        .danger-btn-icon {
            color: var(--danger);
        }

        .danger-btn:hover .danger-btn-icon {
            color: white;
        }

        .help-section {
            margin-top: 32px;
        }

        .help-categories {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        .help-category {
            padding: 24px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .help-category:hover {
            background: var(--primary);
            color: white;
        }

        .help-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
        }

        .help-name {
            font-weight: 600;
        }

        .faq-list {
            margin-top: 24px;
        }

        .faq-item {
            margin-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }

        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            cursor: pointer;
            font-weight: 600;
        }

        .faq-answer {
            padding: 0 16px 16px;
            color: var(--text-light);
            display: none;
        }

        .faq-item.active .faq-answer {
            display: block;
        }

        .contact-support {
            margin-top: 32px;
            text-align: center;
        }

        .support-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        .support-option {
            padding: 24px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .support-option:hover {
            background: var(--primary);
            color: white;
        }

        .support-icon {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .support-name {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .support-desc {
            font-size: 0.9rem;
        }

        .feedback-form {
            margin-top: 32px;
        }

        .feedback-rating {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 16px 0;
        }

        .rating-star {
            font-size: 2rem;
            color: var(--border);
            cursor: pointer;
            transition: var(--transition);
        }

        .rating-star:hover,
        .rating-star.active {
            color: var(--accent);
        }

        .feedback-types {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin: 16px 0;
        }

        .feedback-type {
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .feedback-type:hover,
        .feedback-type.active {
            background: var(--primary);
            color: white;
        }

        .community-forum {
            margin-top: 32px;
        }

        .forum-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin: 16px 0;
        }

        .forum-stat {
            padding: 24px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .forum-posts {
            margin-top: 24px;
        }

        .forum-post {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 16px;
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .post-author {
            font-weight: 600;
        }

        .post-date {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .post-title {
            font-weight: 700;
            margin-bottom: 8px;
        }

        .post-content {
            color: var(--text-light);
            margin-bottom: 12px;
        }

        .post-footer {
            display: flex;
            gap: 16px;
        }

        .post-action {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
            color: var(--text-light);
            cursor: pointer;
        }

        .post-action:hover {
            color: var(--primary);
        }

        .whats-new {
            margin-top: 32px;
        }

        .changelog {
            margin-top: 16px;
        }

        .changelog-version {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 16px;
        }

        .version-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .version-number {
            font-weight: 700;
        }

        .version-date {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .version-changes {
            list-style-type: disc;
            padding-left: 20px;
            color: var(--text-light);
        }

        .version-change {
            margin-bottom: 6px;
        }

        .keyboard-shortcuts {
            margin-top: 32px;
        }

        .shortcuts-list {
            margin-top: 16px;
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }

        .shortcut-action {
            font-weight: 600;
        }

        .shortcut-keys {
            display: flex;
            gap: 4px;
        }

        .shortcut-key {
            padding: 4px 8px;
            background: var(--card-dark);
            border-radius: 4px;
            font-size: 0.8rem;
            font-family: monospace;
        }

        .accessibility-options {
            margin-top: 32px;
        }

        .accessibility-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .accessibility-label {
            flex: 1;
        }

        .accessibility-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .accessibility-desc {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .accessibility-toggle {
            position: relative;
            width: 40px;
            height: 20px;
        }

        .accessibility-checkbox {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .accessibility-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--border);
            transition: var(--transition);
            border-radius: 20px;
        }

        .accessibility-slider::before {
            content: '';
            position: absolute;
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background: white;
            transition: var(--transition);
            border-radius: 50%;
        }

        .accessibility-checkbox:checked + .accessibility-slider {
            background: var(--primary);
        }

        .accessibility-checkbox:checked + .accessibility-slider::before {
            transform: translateX(20px);
        }

        .text-size-preview {
            margin-top: 16px;
            padding: 16px;
            background: var(--card);
            border-radius: var(--radius);
            text-align: center;
        }

        .preview-text {
            margin: 0;
            transition: font-size 0.3s ease;
        }

        .color-contrast-demo {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        .contrast-example {
            padding: 16px;
            border-radius: var(--radius);
            text-align: center;
        }

        .contrast-good {
            background: var(--text);
            color: var(--bg);
        }

        .contrast-bad {
            background: #999;
            color: #eee;
        }

        .contrast-label {
            font-size: 0.8rem;
            margin-top: 8px;
        }

        .voice-control-demo {
            text-align: center;
            margin-top: 24px;
            padding: 24px;
            background: var(--card-dark);
            border-radius: var(--radius);
        }

        .voice-status {
            font-size: 0.9rem;
            margin: 16px 0;
            min-height: 20px;
        }

        .voice-command {
            padding: 8px 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
        }

        .legal-links {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 24px;
        }

        .legal-link {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .legal-link:hover {
            background: var(--primary);
            color: white;
        }

        .about-app {
            margin-top: 32px;
            text-align: center;
        }

        .app-info {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin: 24px 0;
        }

        .info-item {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
        }

        .info-label {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-bottom: 4px;
        }

        .info-value {
            font-weight: 600;
        }

        .contributors {
            margin-top: 32px;
        }

        .contributors-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .contributor {
            text-align: center;
        }

        .contributor-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            margin: 0 auto 8px;
        }

        .contributor-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .contributor-role {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 24px;
        }

        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--card-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text);
            transition: var(--transition);
        }

        .social-link:hover {
            background: var(--primary);
            color: white;
        }

        .app-credits {
            margin-top: 32px;
            text-align: center;
            color: var(--text-light);
        }

        .third-party-licenses {
            margin-top: 24px;
        }

        .license-item {
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .license-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .license-details {
            font-size: 0.8rem;
        }

        .license-link {
            color: var(--primary);
            text-decoration: none;
        }

        .donate-section {
            margin-top: 32px;
            text-align: center;
        }

        .donate-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        .donate-option {
            padding: 24px;
            background: var(--card-dark);
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .donate-option:hover {
            background: var(--primary);
            color: white;
        }

        .donate-icon {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .donate-name {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .donate-desc {
            font-size: 0.9rem;
        }

        .subscription-info {
            margin-top: 24px;
            padding: 24px;
            background: var(--card-dark);
            border-radius: var(--radius);
        }

        .subscription-status {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-active {
            background: var(--success);
            color: white;
        }

        .status-inactive {
            background: var(--danger);
            color: white;
        }

        .subscription-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .subscription-feature {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feature-check {
            color: var(--success);
        }

        .feature-unavailable {
            color: var(--text-light);
        }

        .upgrade-button {
            display: block;
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            margin-top: 16px;
            text-align: center;
        }

        .beta-features {
            margin-top: 32px;
        }

        .beta-feature {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .beta-badge {
            padding: 2px 6px;
            background: var(--accent);
            color: var(--text);
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 700;
        }

        .feature-toggle {
            position: relative;
            width: 40px;
            height: 20px;
        }

        .feature-checkbox {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .feature-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--border);
            transition: var(--transition);
            border-radius: 20px;
        }

        .feature-slider::before {
            content: '';
            position: absolute;
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background: white;
            transition: var(--transition);
            border-radius: 50%;
        }

        .feature-checkbox:checked + .feature-slider {
            background: var(--primary);
        }

        .feature-checkbox:checked + .feature-slider::before {
            transform: translateX(20px);
        }

        .experimental-warning {
            padding: 16px;
            background: rgba(255, 179, 71, 0.1);
            border-radius: var(--radius);
            border-left: 3px solid var(--warning);
            margin-top: 16px;
        }

        .warning-icon {
            color: var(--warning);
            margin-right: 8px;
        }

        .language-selector {
            margin-top: 24px;
        }

        .language-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .language-option {
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .language-option:hover,
        .language-option.active {
            background: var(--primary);
            color: white;
        }

        .language-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .language-native {
            font-size: 0.8rem;
        }

        .region-settings {
            margin-top: 24px;
        }

        .region-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .region-option {
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .region-option:hover,
        .region-option.active {
            background: var(--primary);
            color: white;
        }

        .region-flag {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        .region-name {
            font-weight: 600;
        }

        .export-language {
            margin-top: 16px;
            text-align: center;
        }

        .export-button {
            padding: 8px 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
        }

        .import-language {
            margin-top: 16px;
            text-align: center;
        }

        .import-button {
            display: inline-block;
            padding: 8px 16px;
            background: var(--card-dark);
            color: var(--text);
            border-radius: var(--radius);
            cursor: pointer;
        }

        .import-file {
            display: none;
        }

        .translation-progress {
            margin-top: 24px;
        }

        .progress-bar {
            height: 8px;
            background: var(--card);
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 4px;
        }

        .progress-text {
            font-size: 0.8rem;
            color: var(--text-light);
            text-align: center;
        }

        .contribute-translation {
            margin-top: 16px;
            text-align: center;
        }

        .contribute-button {
            padding: 8px 16px;
            background: var(--accent);
            color: var(--text);
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
        }

        .help-translate {
            margin-top: 32px;
            text-align: center;
        }

        .translation-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin: 16px 0;
        }

        .translation-stat {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .translation-leaders {
            margin-top: 24px;
        }

        .leaders-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .leader {
            text-align: center;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
        }

        .leader-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            margin: 0 auto 8px;
        }

        .leader-name {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 4px;
        }

        .leader-contributions {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .join-translation {
            margin-top: 24px;
            text-align: center;
        }

        .join-button {
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
        }

        .translation-resources {
            margin-top: 32px;
        }

        .resources-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        .resource {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .resource:hover {
            background: var(--primary);
            color: white;
        }

        .resource-icon {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .resource-name {
            font-weight: 600;
        }

        .translation-guidelines {
            margin-top: 32px;
        }

        .guidelines-list {
            margin-top: 16px;
        }

        .guideline {
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .guideline-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .guideline-desc {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .translation-faq {
            margin-top: 32px;
        }

        .translation-community {
            margin-top: 32px;
            text-align: center;
        }

        .community-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin: 16px 0;
        }

        .community-stat {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
        }

        .community-number {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .community-label {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .community-links {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 24px;
        }

        .community-link {
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border-radius: var(--radius);
            text-decoration: none;
            font-weight: 600;
        }

        .community-chat {
            margin-top: 32px;
            text-align: center;
        }

        .chat-embed {
            margin-top: 16px;
            height: 400px;
            background: var(--card-dark);
            border-radius: var(--radius);
            overflow: hidden;
        }

        .chat-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-light);
        }

        .community-events {
            margin-top: 32px;
        }

        .events-list {
            margin-top: 16px;
        }

        .community-event {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 16px;
        }

        .event-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .event-title {
            font-weight: 700;
        }

        .event-date {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .event-description {
            color: var(--text-light);
            margin-bottom: 12px;
        }

        .event-actions {
            display: flex;
            gap: 12px;
        }

        .event-action {
            padding: 6px 12px;
            background: var(--primary);
            color: white;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 0.8rem;
        }

        .community-forum-link {
            margin-top: 24px;
            text-align: center;
        }

        .forum-link {
            padding: 12px 24px;
            background: var(--accent);
            color: var(--text);
            border-radius: var(--radius);
            text-decoration: none;
            font-weight: 600;
        }

        /* Additional styles for new components */
        .context-menu {
            position: absolute;
            background: var(--card);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            overflow: hidden;
            min-width: 150px;
        }

        .context-menu-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: var(--transition);
        }

        .context-menu-item:hover {
            background: var(--card-dark);
        }

        .dropdown {
            position: relative;
        }

        .dropdown-menu {
            position: absolute;
            top: 100%;
            right: 0;
            background: var(--card);
            border-radius: var(--radius);
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            min-width: 150px;
            overflow: hidden;
            display: none;
        }

        .dropdown-menu.show {
            display: block;
        }

        .dropdown-item {
            padding: 12px 16px;
            cursor: pointer;
            transition: var(--transition);
        }

        .dropdown-item:hover {
            background: var(--card-dark);
        }

        .tab-container {
            margin-top: 20px;
        }

        .tab-header {
            display: flex;
            border-bottom: 1px solid var(--border);
        }

        .tab {
            padding: 12px 16px;
            cursor: pointer;
            transition: var(--transition);
            border-bottom: 2px solid transparent;
        }

        .tab.active {
            border-bottom: 2px solid var(--primary);
            color: var(--primary);
        }

        .tab-content {
            padding: 16px 0;
        }

        .tab-pane {
            display: none;
        }

        .tab-pane.active {
            display: block;
        }

        .tooltip {
            position: relative;
        }

        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            padding: 6px 12px;
            background: var(--text);
            color: var(--bg);
            border-radius: 4px;
            font-size: 0.8rem;
            white-space: nowrap;
            z-index: 1000;
        }

        .carousel {
            position: relative;
            overflow: hidden;
            border-radius: var(--radius);
        }

        .carousel-inner {
            display: flex;
            transition: transform 0.3s ease;
        }

        .carousel-item {
            min-width: 100%;
        }

        .carousel-control {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(0, 0, 0, 0.5);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 100;
        }

        .carousel-control.prev {
            left: 10px;
        }

        .carousel-control.next {
            right: 10px;
        }

        .pagination {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-top: 16px;
        }

        .page-item {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--border);
            cursor: pointer;
        }

        .page-item.active {
            background: var(--primary);
        }

        .search-box {
            position: relative;
            margin-bottom: 20px;
        }

        .search-input {
            padding-left: 40px;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }

        .sortable-ghost {
            opacity: 0.5;
        }

        .sortable-chosen {
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }

        .drag-handle {
            cursor: move;
            color: var(--text-light);
        }

        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-light);
        }

        .empty-state-icon {
            font-size: 3rem;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .color-picker {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .color-option {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
        }

        .color-option.selected {
            border-color: var(--text);
        }

        .audio-player {
            width: 100%;
            margin-top: 16px;
        }

        .audio-controls {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .audio-progress {
            flex: 1;
            height: 4px;
            background: var(--card-dark);
            border-radius: 2px;
            overflow: hidden;
            cursor: pointer;
        }

        .audio-progress-filled {
            height: 100%;
            background: var(--primary);
        }

        .audio-time {
            font-size: 0.8rem;
            color: var(--text-light);
            min-width: 80px;
            text-align: right;
        }

        .voice-recorder {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .record-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--danger);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border: none;
        }

        .record-btn.recording {
            animation: pulse 1s infinite;
        }

        .waveform {
            flex: 1;
            height: 40px;
            background: var(--card-dark);
            border-radius: var(--radius);
            overflow: hidden;
            position: relative;
        }

        .wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 20px;
            background: linear-gradient(to top, var(--primary), transparent);
            opacity: 0.5;
            transform-origin: bottom;
        }

        .confetti {
            position: fixed;
            width: 10px;
            height: 10px;
            background: var(--primary);
            opacity: 0;
            pointer-events: none;
            z-index: 10000;
        }

        .achievement-badge {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 2rem;
            margin: 0 auto 16px;
            box-shadow: var(--shadow-lg);
        }

        .streak-counter {
            display: flex;
            align-items: center;
            gap: 8px;
            background: var(--card-dark);
            padding: 8px 12px;
            border-radius: 20px;
        }

        .streak-number {
            font-weight: 700;
            color: var(--accent-dark);
        }

        .habit-tracker {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 4px;
            margin-top: 16px;
        }

        .habit-day {
            aspect-ratio: 1;
            border-radius: 6px;
            background: var(--card-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .habit-day.completed {
            background: var(--success);
            color: white;
        }

        .habit-day.partial {
            background: linear-gradient(135deg, var(--success) 50%, var(--card-dark) 50%);
        }

        .habit-day.missed {
            background: var(--danger);
            color: white;
        }

        .mood-picker {
            display: flex;
            justify-content: space-between;
            margin-top: 16px;
        }

        .mood-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            opacity: 0.6;
            transition: var(--transition);
        }

        .mood-option:hover,
        .mood-option.selected {
            opacity: 1;
            transform: scale(1.1);
        }

        .mood-emoji {
            font-size: 1.5rem;
        }

        .mood-label {
            font-size: 0.8rem;
        }

        .timeline {
            position: relative;
            padding-left: 20px;
            margin-left: 10px;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--border);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 20px;
        }

        .timeline-item::before {
            content: '';
            position: absolute;
            left: -24px;
            top: 6px;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--primary);
        }

        .timeline-date {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-bottom: 4px;
        }

        .timeline-content {
            background: var(--card-dark);
            padding: 12px;
            border-radius: var(--radius);
        }

        .interactive-tutorial {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            opacity: 0;
            pointer-events: none;
            transition: var(--transition);
        }

        .interactive-tutorial.active {
            opacity: 1;
            pointer-events: all;
        }

        .tutorial-content {
            background: var(--card);
            border-radius: var(--radius);
            padding: 24px;
            max-width: 400px;
            position: relative;
        }

        .tutorial-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .tutorial-indicators {
            display: flex;
            gap: 6px;
            justify-content: center;
            margin-top: 16px;
        }

        .tutorial-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--border);
        }

        .tutorial-indicator.active {
            background: var(--primary);
        }

        .hotkey-hint {
            display: inline-block;
            padding: 2px 6px;
            background: var(--card-dark);
            border-radius: 4px;
            font-size: 0.8rem;
            margin-left: 8px;
            border: 1px solid var(--border);
        }

        .connection-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.8rem;
            padding: 4px 8px;
            border-radius: 12px;
            background: var(--card-dark);
        }

        .status-online {
            color: var(--success);
        }

        .status-offline {
            color: var(--danger);
        }

        .status-syncing {
            color: var(--warning);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }

        .status-online .status-dot {
            background: var(--success);
        }

        .status-offline .status-dot {
            background: var(--danger);
        }

        .status-syncing .status-dot {
            background: var(--warning);
            animation: pulse 2s infinite;
        }

        .sync-spinner {
            width: 16px;
            height: 16px;
            border: 2px solid var(--border);
            border-top: 2px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .data-sync-info {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 8px;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .privacy-shield {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 4px 8px;
            background: rgba(41, 196, 138, 0.1);
            color: var(--success);
            border-radius: 12px;
            font-size: 0.8rem;
        }

        .encryption-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 0.7rem;
            color: var(--text-light);
        }

        .data-usage-bar {
            height: 6px;
            background: var(--card-dark);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 8px;
        }

        .data-usage-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 3px;
        }

        .backup-status {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-top: 12px;
        }

        .backup-status.success {
            border-left: 3px solid var(--success);
        }

        .backup-status.warning {
            border-left: 3px solid var(--warning);
        }

        .backup-status.error {
            border-left: 3px solid var(--danger);
        }

        .backup-icon {
            font-size: 1.2rem;
        }

        .backup-info {
            flex: 1;
        }

        .backup-title {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .backup-details {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .backup-action {
            color: var(--primary);
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
        }

        .family-code {
            display: flex;
            align-items: center;
            gap: 12px;
            background: var(--card-dark);
            padding: 12px;
            border-radius: var(--radius);
            margin-top: 16px;
        }

        .code-value {
            font-family: monospace;
            font-size: 1.2rem;
            letter-spacing: 2px;
            flex: 1;
            text-align: center;
        }

        .copy-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: var(--radius);
            cursor: pointer;
        }

        .members-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 16px;
        }

        .member-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
        }

        .member-info {
            flex: 1;
        }

        .member-name {
            font-weight: 600;
        }

        .member-role {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .member-actions {
            display: flex;
            gap: 8px;
        }

        .action-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--card);
            border: 1px solid var(--border);
            cursor: pointer;
            transition: var(--transition);
        }

        .action-btn:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .invite-section {
            margin-top: 24px;
        }

        .invite-input-group {
            display: flex;
            gap: 12px;
            margin-top: 12px;
        }

        .invite-input {
            flex: 1;
        }

        .role-select {
            min-width: 120px;
        }

        .permissions-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .permission-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .permission-checkbox {
            width: 18px;
            height: 18px;
            border-radius: 4px;
            border: 2px solid var(--border);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
        }

        .permission-checkbox.checked {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
        }

        .permission-label {
            font-size: 0.9rem;
        }

        .security-log {
            margin-top: 24px;
        }

        .log-item {
            display: flex;
            gap: 12px;
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }

        .log-icon {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: var(--card-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
        }

        .log-details {
            flex: 1;
        }

        .log-action {
            font-weight: 600;
        }

        .log-meta {
            display: flex;
            gap: 12px;
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 4px;
        }

        .log-date {
            flex: 1;
        }

        .log-ip {
            font-family: monospace;
        }

        .two-factor-setup {
            margin-top: 24px;
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
        }

        .qrcode-container {
            text-align: center;
            margin: 16px 0;
            padding: 16px;
            background: white;
            border-radius: var(--radius);
            display: inline-block;
        }

        .backup-codes {
            margin-top: 16px;
            background: var(--card);
            padding: 16px;
            border-radius: var(--radius);
        }

        .backup-codes-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
            margin-top: 12px;
            font-family: monospace;
        }

        .data-export-options {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .export-option {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .export-option:hover {
            background: var(--primary);
            color: white;
        }

        .export-icon {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .export-format {
            font-weight: 600;
        }

        .export-info {
            font-size: 0.8rem;
            margin-top: 4px;
        }

        .storage-usage {
            margin-top: 24px;
        }

        .usage-breakdown {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .usage-category {
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
        }

        .usage-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .usage-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .usage-size {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .usage-bar {
            height: 6px;
            background: var(--card);
            border-radius: 3px;
            overflow: hidden;
        }

        .usage-fill {
            height: 100%;
            border-radius: 3px;
        }

        .usage-events .usage-fill {
            background: var(--primary);
        }

        .usage-media .usage-fill {
            background: var(--success);
        }

        .usage-documents .usage-fill {
            background: var(--warning);
        }

        .usage-other .usage-fill {
            background: var(--danger);
        }

        .auto-delete-options {
            margin-top: 16px;
        }

        .auto-delete-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .auto-delete-label {
            flex: 1;
        }

        .auto-delete-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .auto-delete-desc {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 4px;
        }

        .auto-delete-toggle {
            position: relative;
            width: 40px;
            height: 20px;
        }

        .auto-delete-checkbox {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .auto-delete-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--border);
            transition: var(--transition);
            border-radius: 20px;
        }

        .auto-delete-slider::before {
            content: '';
            position: absolute;
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background: white;
            transition: var(--transition);
            border-radius: 50%;
        }

        .auto-delete-checkbox:checked + .auto-delete-slider {
            background: var(--primary);
        }

        .auto-delete-checkbox:checked + .auto-delete-slider::before {
            transform: translateX(20px);
        }

        .privacy-settings {
            margin-top: 24px;
        }

        .privacy-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .privacy-label {
            flex: 1;
        }

        .privacy-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .privacy-desc {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 4px;
        }

        .privacy-select {
            min-width: 120px;
        }

        .data-sources {
            margin-top: 24px;
        }

        .data-source {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .source-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .source-info {
            flex: 1;
        }

        .source-name {
            font-weight: 600;
        }

        .source-status {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .source-action {
            color: var(--primary);
            cursor: pointer;
            font-weight: 600;
        }

        .advanced-settings {
            margin-top: 24px;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .setting-label {
            flex: 1;
        }

        .setting-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .setting-desc {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-top: 4px;
        }

        .setting-control {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .reset-btn {
            padding: 6px 12px;
            background: var(--danger);
            color: white;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
        }

        .danger-zone {
            margin-top: 32px;
            padding: 24px;
            background: rgba(255, 107, 107, 0.1);
            border-radius: var(--radius);
            border: 1px solid var(--danger);
        }

        .danger-title {
            color: var(--danger);
            font-weight: 700;
            margin-bottom: 16px;
        }

        .danger-actions {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .danger-btn {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            background: white;
            border: 1px solid var(--danger);
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .danger-btn:hover {
            background: var(--danger);
            color: white;
        }

        .danger-btn-content {
            flex: 1;
            text-align: left;
        }

        .danger-btn-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .danger-btn-desc {
            font-size: 0.8rem;
        }

        .danger-btn-icon {
            color: var(--danger);
        }

        .danger-btn:hover .danger-btn-icon {
            color: white;
        }

        .help-section {
            margin-top: 32px;
        }

        .help-categories {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        .help-category {
            padding: 24px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .help-category:hover {
            background: var(--primary);
            color: white;
        }

        .help-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
        }

        .help-name {
            font-weight: 600;
        }

        .faq-list {
            margin-top: 24px;
        }

        .faq-item {
            margin-bottom: 16px;
            border-bottom: 1px solid var(--border);
        }

        .faq-question {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            cursor: pointer;
            font-weight: 600;
        }

        .faq-answer {
            padding: 0 16px 16px;
            color: var(--text-light);
            display: none;
        }

        .faq-item.active .faq-answer {
            display: block;
        }

        .contact-support {
            margin-top: 32px;
            text-align: center;
        }

        .support-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        .support-option {
            padding: 24px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .support-option:hover {
            background: var(--primary);
            color: white;
        }

        .support-icon {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .support-name {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .support-desc {
            font-size: 0.9rem;
        }

        .feedback-form {
            margin-top: 32px;
        }

        .feedback-rating {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin: 16px 0;
        }

        .rating-star {
            font-size: 2rem;
            color: var(--border);
            cursor: pointer;
            transition: var(--transition);
        }

        .rating-star:hover,
        .rating-star.active {
            color: var(--accent);
        }

        .feedback-types {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin: 16px 0;
        }

        .feedback-type {
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .feedback-type:hover,
        .feedback-type.active {
            background: var(--primary);
            color: white;
        }

        .community-forum {
            margin-top: 32px;
        }

        .forum-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin: 16px 0;
        }

        .forum-stat {
            padding: 24px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .forum-posts {
            margin-top: 24px;
        }

        .forum-post {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 16px;
        }

        .post-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 12px;
        }

        .post-author {
            font-weight: 600;
        }

        .post-date {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .post-title {
            font-weight: 700;
            margin-bottom: 8px;
        }

        .post-content {
            color: var(--text-light);
            margin-bottom: 12px;
        }

        .post-footer {
            display: flex;
            gap: 16px;
        }

        .post-action {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 0.9rem;
            color: var(--text-light);
            cursor: pointer;
        }

        .post-action:hover {
            color: var(--primary);
        }

        .whats-new {
            margin-top: 32px;
        }

        .changelog {
            margin-top: 16px;
        }

        .changelog-version {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 16px;
        }

        .version-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .version-number {
            font-weight: 700;
        }

        .version-date {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .version-changes {
            list-style-type: disc;
            padding-left: 20px;
            color: var(--text-light);
        }

        .version-change {
            margin-bottom: 6px;
        }

        .keyboard-shortcuts {
            margin-top: 32px;
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
        }

        .shortcuts-list {
            margin-top: 16px;
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            border-bottom: 1px solid var(--border);
        }

        .shortcut-action {
            font-weight: 600;
        }

        .shortcut-keys {
            display: flex;
            gap: 4px;
        }

        .shortcut-key {
            padding: 4px 8px;
            background: var(--card);
            border-radius: 4px;
            font-size: 0.8rem;
            font-family: monospace;
        }

        .accessibility-options {
            margin-top: 32px;
        }

        .accessibility-option {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .accessibility-label {
            flex: 1;
        }

        .accessibility-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .accessibility-desc {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .accessibility-toggle {
            position: relative;
            width: 40px;
            height: 20px;
        }

        .accessibility-checkbox {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .accessibility-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--border);
            transition: var(--transition);
            border-radius: 20px;
        }

        .accessibility-slider::before {
            content: '';
            position: absolute;
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background: white;
            transition: var(--transition);
            border-radius: 50%;
        }

        .accessibility-checkbox:checked + .accessibility-slider {
            background: var(--primary);
        }

        .accessibility-checkbox:checked + .accessibility-slider::before {
            transform: translateX(20px);
        }

        .text-size-preview {
            margin-top: 16px;
            padding: 16px;
            background: var(--card);
            border-radius: var(--radius);
            text-align: center;
        }

        .preview-text {
            margin: 0;
            transition: font-size 0.3s ease;
        }

        .color-contrast-demo {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        .contrast-example {
            padding: 16px;
            border-radius: var(--radius);
            text-align: center;
        }

        .contrast-good {
            background: var(--text);
            color: var(--bg);
        }

        .contrast-bad {
            background: #999;
            color: #eee;
        }

        .contrast-label {
            font-size: 0.8rem;
            margin-top: 8px;
        }

        .voice-control-demo {
            text-align: center;
            margin-top: 24px;
            padding: 24px;
            background: var(--card-dark);
            border-radius: var(--radius);
        }

        .voice-status {
            font-size: 0.9rem;
            margin: 16px 0;
            min-height: 20px;
            color: var(--text-light);
        }

        .voice-command {
            padding: 8px 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
        }

        .legal-links {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 24px;
        }

        .legal-link {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .legal-link:hover {
            background: var(--primary);
            color: white;
        }

        .about-app {
            margin-top: 32px;
            text-align: center;
        }

        .app-info {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin: 24px 0;
        }

        .info-item {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
        }

        .info-label {
            font-size: 0.8rem;
            color: var(--text-light);
            margin-bottom: 4px;
        }

        .info-value {
            font-weight: 600;
        }

        .contributors {
            margin-top: 32px;
        }

        .contributors-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 16px;
            margin-top: 16px;
        }

        .contributor {
            text-align: center;
        }

        .contributor-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            margin: 0 auto 8px;
            font-size: 1.2rem;
        }

        .contributor-name {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .contributor-role {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 24px;
        }

        .social-link {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--card-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text);
            transition: var(--transition);
        }

        .social-link:hover {
            background: var(--primary);
            color: white;
        }

        .app-credits {
            margin-top: 32px;
            text-align: center;
            color: var(--text-light);
        }

        .third-party-licenses {
            margin-top: 24px;
        }

        .license-item {
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .license-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .license-details {
            font-size: 0.8rem;
        }

        .license-link {
            color: var(--primary);
            text-decoration: none;
        }

        .donate-section {
            margin-top: 32px;
            text-align: center;
        }

        .donate-options {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        .donate-option {
            padding: 24px;
            background: var(--card-dark);
            border-radius: var(--radius);
            cursor: pointer;
            transition: var(--transition);
        }

        .donate-option:hover {
            background: var(--primary);
            color: white;
        }

        .donate-icon {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .donate-name {
            font-weight: 600;
            margin-bottom: 8px;
        }

        .donate-desc {
            font-size: 0.9rem;
        }

        .subscription-info {
            margin-top: 24px;
            padding: 24px;
            background: var(--card-dark);
            border-radius: var(--radius);
        }

        .subscription-status {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 16px;
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-active {
            background: var(--success);
            color: white;
        }

        .status-inactive {
            background: var(--danger);
            color: white;
        }

        .subscription-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .subscription-feature {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feature-check {
            color: var(--success);
        }

        .feature-unavailable {
            color: var(--text-light);
        }

        .upgrade-button {
            display: block;
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            font-weight: 600;
            cursor: pointer;
            margin-top: 16px;
            text-align: center;
        }

        .beta-features {
            margin-top: 32px;
        }

        .beta-feature {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .beta-badge {
            padding: 2px 6px;
            background: var(--accent);
            color: var(--text);
            border-radius: 10px;
            font-size: 0.7rem;
            font-weight: 700;
        }

        .feature-toggle {
            position: relative;
            width: 40px;
            height: 20px;
        }

        .feature-checkbox {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .feature-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--border);
            transition: var(--transition);
            border-radius: 20px;
        }

        .feature-slider::before {
            content: '';
            position: absolute;
            height: 16px;
            width: 16px;
            left: 2px;
            bottom: 2px;
            background: white;
            transition: var(--transition);
            border-radius: 50%;
        }

        .feature-checkbox:checked + .feature-slider {
            background: var(--primary);
        }

        .feature-checkbox:checked + .feature-slider::before {
            transform: translateX(20px);
        }

        .experimental-warning {
            padding: 16px;
            background: rgba(255, 179, 71, 0.1);
            border-radius: var(--radius);
            border-left: 3px solid var(--warning);
            margin-top: 16px;
        }

        .warning-icon {
            color: var(--warning);
            margin-right: 8px;
        }

        .language-selector {
            margin-top: 24px;
        }

        .language-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .language-option {
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .language-option:hover,
        .language-option.active {
            background: var(--primary);
            color: white;
        }

        .language-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .language-native {
            font-size: 0.8rem;
        }

        .region-settings {
            margin-top: 24px;
        }

        .region-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .region-option {
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .region-option:hover,
        .region-option.active {
            background: var(--primary);
            color: white;
        }

        .region-flag {
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        .region-name {
            font-weight: 600;
        }

        .export-language {
            margin-top: 16px;
            text-align: center;
        }

        .export-button {
            padding: 8px 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
        }

        .import-language {
            margin-top: 16px;
            text-align: center;
        }

        .import-button {
            display: inline-block;
            padding: 8px 16px;
            background: var(--card-dark);
            color: var(--text);
            border-radius: var(--radius);
            cursor: pointer;
        }

        .import-file {
            display: none;
        }

        .translation-progress {
            margin-top: 24px;
        }

        .progress-bar {
            height: 8px;
            background: var(--card);
            border-radius: 4px;
            overflow: hidden;
            margin: 8px 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 4px;
        }

        .progress-text {
            font-size: 0.8rem;
            color: var(--text-light);
            text-align: center;
        }

        .contribute-translation {
            margin-top: 16px;
            text-align: center;
        }

        .contribute-button {
            padding: 8px 16px;
            background: var(--accent);
            color: var(--text);
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
        }

        .help-translate {
            margin-top: 32px;
            text-align: center;
        }

        .translation-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin: 16px 0;
        }

        .translation-stat {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
        }

        .stat-number {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .translation-leaders {
            margin-top: 24px;
        }

        .leaders-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 12px;
            margin-top: 16px;
        }

        .leader {
            text-align: center;
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
        }

        .leader-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            margin: 0 auto 8px;
        }

        .leader-name {
            font-weight: 600;
            font-size: 0.9rem;
            margin-bottom: 4px;
        }

        .leader-contributions {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .join-translation {
            margin-top: 24px;
            text-align: center;
        }

        .join-button {
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: var(--radius);
            cursor: pointer;
            font-weight: 600;
        }

        .translation-resources {
            margin-top: 32px;
        }

        .resources-list {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            margin-top: 16px;
        }

        .resource {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .resource:hover {
            background: var(--primary);
            color: white;
        }

        .resource-icon {
            font-size: 2rem;
            margin-bottom: 12px;
        }

        .resource-name {
            font-weight: 600;
        }

        .translation-guidelines {
            margin-top: 32px;
        }

        .guidelines-list {
            margin-top: 16px;
        }

        .guideline {
            padding: 12px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 8px;
        }

        .guideline-title {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .guideline-desc {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        .translation-faq {
            margin-top: 32px;
        }

        .translation-community {
            margin-top: 32px;
            text-align: center;
        }

        .community-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 16px;
            margin: 16px 0;
        }

        .community-stat {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            text-align: center;
        }

        .community-number {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .community-label {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .community-links {
            display: flex;
            justify-content: center;
            gap: 16px;
            margin-top: 24px;
        }

        .community-link {
            padding: 12px 24px;
            background: var(--primary);
            color: white;
            border-radius: var(--radius);
            text-decoration: none;
            font-weight: 600;
        }

        .community-chat {
            margin-top: 32px;
            text-align: center;
        }

        .chat-embed {
            margin-top: 16px;
            height: 400px;
            background: var(--card-dark);
            border-radius: var(--radius);
            overflow: hidden;
        }

        .chat-placeholder {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: var(--text-light);
        }

        .community-events {
            margin-top: 32px;
        }

        .events-list {
            margin-top: 16px;
        }

        .community-event {
            padding: 16px;
            background: var(--card-dark);
            border-radius: var(--radius);
            margin-bottom: 16px;
        }

        .event-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            flex-wrap: wrap;
        }

        .event-title {
            font-weight: 700;
        }

        .event-date {
            font-size: 0.8rem;
            color: var(--text-light);
        }

        .event-description {
            color: var(--text-light);
            margin-bottom: 12px;
        }

        .event-actions {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .event-action {
            padding: 6px 12px;
            background: var(--primary);
            color: white;
            border-radius: var(--radius);
            cursor: pointer;
            font-size: 0.8rem;
        }

        .community-forum-link {
            margin-top: 24px;
            text-align: center;
        }

        .forum-link {
            padding: 12px 24px;
            background: var(--accent);
            color: var(--text);
            border-radius: var(--radius);
            text-decoration: none;
            font-weight: 600;
        }

        /* Responsive adjustments for new components */
        @media (max-width: 768px) {
            .permissions-grid {
                grid-template-columns: 1fr;
            }
            
            .data-export-options {
                grid-template-columns: 1fr;
            }
            
            .usage-breakdown {
                grid-template-columns: 1fr;
            }
            
            .support-options {
                grid-template-columns: 1fr;
            }
            
            .forum-stats {
                grid-template-columns: 1fr;
            }
            
            .app-info {
                grid-template-columns: 1fr;
            }
            
            .contributors-list {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .donate-options {
                grid-template-columns: 1fr;
            }
            
            .subscription-details {
                grid-template-columns: 1fr;
            }
            
            .language-options {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .region-options {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .translation-stats {
                grid-template-columns: 1fr;
            }
            
            .leaders-list {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .resources-list {
                grid-template-columns: 1fr;
            }
            
            .community-stats {
                grid-template-columns: 1fr;
            }
            
            .community-links {
                flex-direction: column;
                align-items: center;
            }
        }

        @media (max-width: 480px) {
            .contributors-list {
                grid-template-columns: 1fr;
            }
            
            .language-options {
                grid-template-columns: 1fr;
            }
            
            .region-options {
                grid-template-columns: 1fr;
            }
            
            .leaders-list {
                grid-template-columns: 1fr;
            }
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-color: #f8f9fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 2rem 0;
            text-align: center;
        }
        
        main {
            flex: 1;
            padding: 2rem 0;
        }
        
        .content {
            background: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 2rem;
            margin-bottom: 2rem;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }
        
        p {
            margin-bottom: 1rem;
        }
        
        /* Styles pour le footer */
        footer {
            background-color: #2c3e50;
            color: #ecf0f1;
            padding: 60px 0 20px;
            margin-top: auto;
        }
        
        .footer-content {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            gap: 40px;
            margin-bottom: 40px;
        }
        
        .footer-section {
            flex: 1;
            min-width: 250px;
        }
        
        .footer-section h3 {
            font-size: 1.4rem;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
        }
        
        .footer-section h3::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 2px;
            background-color: #3498db;
        }
        
        .footer-links {
            list-style: none;
        }
        
        .footer-links li {
            margin-bottom: 12px;
        }
        
        .footer-links a {
            color: #bdc3c7;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: #3498db;
            padding-left: 5px;
        }
        
        .contact-info {
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .contact-info i {
            margin-right: 10px;
            color: #3498db;
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .social-icons a {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background-color: #34495e;
            color: white;
            border-radius: 50%;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .social-icons a:hover {
            background-color: #3498db;
            transform: translateY(-3px);
        }
        
        .newsletter form {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .newsletter input {
            padding: 12px 15px;
            border: none;
            border-radius: 4px;
            background-color: #34495e;
            color: white;
        }
        
        .newsletter input::placeholder {
            color: #bdc3c7;
        }
        
        .newsletter button {
            padding: 12px 15px;
            border: none;
            border-radius: 4px;
            background-color: #3498db;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .newsletter button:hover {
            background-color: #2980b9;
        }
        
        .footer-bottom {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid #34495e;
            font-size: 0.9rem;
            color: #bdc3c7;
        }
        
        @media (max-width: 768px) {
            .footer-content {
                flex-direction: column;
                gap: 30px;
            }
            
            .footer-section {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <!-- ... (le sidebar existant reste inchangé) ... -->
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <div class="header">
                <div class="header-left">
                    <h1 id="page-title">Dashboard</h1>
                    <p id="page-subtitle">Organisation et bien-être pour toute la famille</p>
                </div>
                <div class="header-right">
                    <button class="btn btn-secondary" id="theme-toggle">
                        <i class="fas fa-moon"></i>
                        <span>Mode sombre</span>
                    </button>
                </div>
            </div>

            <!-- Dashboard View -->
            <div class="view-content" id="dashboard-view">
                <!-- ... (le dashboard existant reste inchangé) ... -->
            </div>

            <!-- Chat View -->
            <div class="view-content hidden" id="chat-view">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Chat Familial</h2>
                        <div class="family-members">
                            <div class="family-member">
                                <div class="member-avatar">M</div>
                                <div class="member-name">Marie</div>
                            </div>
                            <div class="family-member">
                                <div class="member-avatar">P</div>
                                <div class="member-name">Pierre</div>
                            </div>
                            <div class="family-member">
                                <div class="member-avatar">E</div>
                                <div class="member-name">Emma</div>
                            </div>
                            <div class="family-member">
                                <div class="member-avatar">L</div>
                                <div class="member-name">Lucas</div>
                            </div>
                        </div>
                    </div>
                    <div class="chat-messages" id="full-chat-messages" style="height: 400px;">
                        <!-- Messages will be populated by JavaScript -->
                    </div>
                    <div class="chat-input-container">
                        <input type="text" class="chat-input" placeholder="Écrire un message..." id="full-chat-input">
                        <button class="chat-send" id="full-chat-send">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Calendar View -->
            <div class="view-content hidden" id="calendar-view">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Calendrier Familial</h2>
                        <div class="calendar-nav">
                            <button class="btn btn-secondary btn-sm" id="prev-month">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                            <span id="current-month-year">Mois 2023</span>
                            <button class="btn btn-secondary btn-sm" id="next-month">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </div>
                    </div>
                    <div id="full-calendar-container"></div>
                    <div class="events-list" id="calendar-events-list">
                        <!-- Events will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Activities View -->
            <div class="view-content hidden" id="activities-view">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Activités Inclusives</h2>
                        <div class="filter-bar">
                            <button class="filter-btn active" data-filter="all">Toutes</button>
                            <button class="filter-btn" data-filter="culture">Culture</button>
                            <button class="filter-btn" data-filter="nature">Nature</button>
                            <button class="filter-btn" data-filter="sport">Sport</button>
                            <button class="filter-btn" data-filter="food">Cuisine</button>
                        </div>
                    </div>
                    <div class="activities-grid" id="activities-grid">
                        <!-- Activities will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Wellbeing View -->
            <div class="view-content hidden" id="wellbeing-view">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Bien-être Familial</h2>
                        <div class="streak-counter">
                            <i class="fas fa-fire" style="color: var(--accent-dark);"></i>
                            <span class="streak-number">7</span>
                            <span>jours de méditation consécutifs</span>
                        </div>
                    </div>
                    <div class="wellbeing-content">
                        <div class="meditation-section">
                            <h3>Méditation Guidée</h3>
                            <div class="meditation-timer" id="full-meditation-timer">15:00</div>
                            <div class="meditation-controls">
                                <button class="meditation-button" id="full-start-meditation">
                                    <i class="fas fa-play"></i>
                                    <span>Démarrer la méditation</span>
                                </button>
                                <div class="meditation-options">
                                    <button class="btn btn-sm btn-secondary" data-duration="300">5 min</button>
                                    <button class="btn btn-sm btn-secondary" data-duration="600">10 min</button>
                                    <button class="btn btn-sm btn-secondary" data-duration="900">15 min</button>
                                </div>
                            </div>
                        </div>
                        <div class="mood-tracker">
                            <h3>Comment vous sentez-vous aujourd'hui?</h3>
                            <div class="mood-picker">
                                <div class="mood-option" data-mood="1">
                                    <div class="mood-emoji">😢</div>
                                    <div class="mood-label">Triste</div>
                                </div>
                                <div class="mood-option" data-mood="2">
                                    <div class="mood-emoji">😕</div>
                                    <div class="mood-label">Fatigué</div>
                                </div>
                                <div class="mood-option" data-mood="3">
                                    <div class="mood-emoji">😐</div>
                                    <div class="mood-label">Neutre</div>
                                </div>
                                <div class="mood-option" data-mood="4">
                                    <div class="mood-emoji">🙂</div>
                                    <div class="mood-label">Bien</div>
                                </div>
                                <div class="mood-option" data-mood="5">
                                    <div class="mood-emoji">😄</div>
                                    <div class="mood-label">Excellent</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tasks View -->
            <div class="view-content hidden" id="tasks-view">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Tâches Familiales</h2>
                        <div class="filter-bar">
                            <button class="filter-btn active" data-filter="all">Toutes</button>
                            <button class="filter-btn" data-filter="todo">À faire</button>
                            <button class="filter-btn" data-filter="completed">Terminées</button>
                        </div>
                    </div>
                    <div class="task-list" id="full-task-list">
                        <!-- Tasks will be populated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Settings View -->
            <div class="view-content hidden" id="settings-view">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Paramètres</h2>
                    </div>
                    <div class="settings-content">
                        <div class="setting-section">
                            <h3>Profil Familial</h3>
                            <div class="form-group">
                                <label class="form-label">Nom de famille</label>
                                <input type="text" class="input" value="Famille Martin">
                            </div>
                            <div class="members-list">
                                <div class="member-item">
                                    <div class="member-avatar">M</div>
                                    <div class="member-info">
                                        <div class="member-name">Marie</div>
                                        <div class="member-role">Parent</div>
                                    </div>
                                    <div class="member-actions">
                                        <button class="action-btn"><i class="fas fa-edit"></i></button>
                                    </div>
                                </div>
                                <div class="member-item">
                                    <div class="member-avatar">P</div>
                                    <div class="member-info">
                                        <div class="member-name">Pierre</div>
                                        <div class="member-role">Parent</div>
                                    </div>
                                    <div class="member-actions">
                                        <button class="action-btn"><i class="fas fa-edit"></i></button>
                                    </div>
                                </div>
                                <div class="member-item">
                                    <div class="member-avatar">E</div>
                                    <div class="member-info">
                                        <div class="member-name">Emma</div>
                                        <div class="member-role">Enfant</div>
                                    </div>
                                    <div class="member-actions">
                                        <button class="action-btn"><i class="fas fa-edit"></i></button>
                                    </div>
                                </div>
                                <div class="member-item">
                                    <div class="member-avatar">L</div>
                                    <div class="member-info">
                                        <div class="member-name">Lucas</div>
                                        <div class="member-role">Enfant</div>
                                    </div>
                                    <div class="member-actions">
                                        <button class="action-btn"><i class="fas fa-edit"></i></button>
                                    </div>
                                </div>
                            </div>
                            <button class="btn btn-primary" style="margin-top: 16px;">
                                <i class="fas fa-plus"></i>
                                <span>Ajouter un membre</span>
                            </button>
                        </div>
                        
                        <div class="setting-section">
                            <h3>Préférences</h3>
                            <div class="preference-item">
                                <div class="preference-label">
                                    <h4>Notifications</h4>
                                    <p>Recevoir des notifications pour les événements et tâches</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="preference-item">
                                <div class="preference-label">
                                    <h4>Rappels quotidiens</h4>
                                    <p>Recevoir un rappel des activités de la journée</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                            <div class="preference-item">
                                <div class="preference-label">
                                    <h4>Accessibilité</h4>
                                    <p>Mode haute visibilité</p>
                                </div>
                                <label class="switch">
                                    <input type="checkbox">
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals -->
    <!-- ... (les modals existants restent inchangés) ... -->

    <!-- Notification -->
    <!-- ... (la notification existante reste inchangée) ... -->
    
    <footer>
        <!-- ... (le footer existant reste inchangé) ... -->
    </footer>
    <script>
        // ========== ÉTAT DE L'APPLICATION ==========
        const state = {
            user: {
                id: 1,
                name: "Marie",
                email: "marie@example.com",
                familyName: "Famille Martin",
                avatar: "M",
                role: "parent"
            },
            currentView: "dashboard",
            isAuthenticated: true,
            theme: "light",
            events: [],
            tasks: [],
            messages: [],
            activities: [],
            meditation: {
                active: false,
                timer: 0,
                duration: 15 * 60, // 15 minutes in seconds
                interval: null
            },
            notifications: [],
            currentMonth: new Date().getMonth(),
            currentYear: new Date().getFullYear()
        };
        
        // ========== DONNÉES DE DÉMONSTRATION ==========
        const demoData = {
            events: [
                {
                    id: 1,
                    title: "Heure du goûter",
                    time: "15:00",
                    date: new Date().toISOString().split('T')[0],
                    description: "Pause gourmande en famille",
                    color: "#FFD166",
                    createdAt: new Date().toISOString()
                },
                {
                    id: 2,
                    title: "Cours de piano",
                    time: "17:00",
                    date: new Date().toISOString().split('T')[0],
                    description: "Leçon de piano d'Emma",
                    color: "#1C9DEA",
                    createdAt: new Date().toISOString()
                },
                {
                    id: 3,
                    title: "Jeux de famille",
                    time: "20:00",
                    date: new Date().toISOString().split('T')[0],
                    description: "Soirée jeux de société",
                    color: "#29C48A",
                    createdAt: new Date().toISOString()
                }
            ],
            tasks: [
                {
                    id: 1,
                    title: "Préparer le dîner",
                    completed: false,
                    assignee: "Marie",
                    dueDate: new Date().toISOString().split('T')[0],
                    priority: "high",
                    createdAt: new Date().toISOString()
                },
                {
                    id: 2,
                    title: "Faire les devoirs",
                    completed: true,
                    assignee: "Emma",
                    dueDate: new Date().toISOString().split('T')[0],
                    priority: "medium",
                    createdAt: new Date().toISOString()
                },
                {
                    id: 3,
                    title: "Acheter cadeau anniversaire",
                    completed: false,
                    assignee: "Pierre",
                    dueDate: new Date(Date.now() + 86400000).toISOString().split('T')[0],
                    priority: "low",
                    createdAt: new Date().toISOString()
                }
            ],
            messages: [
                {
                    id: 1,
                    sender: "Emma",
                    content: "Salut à tous! Quelle activité ce soir?",
                    timestamp: new Date(Date.now() - 300000).toISOString(),
                    type: "user"
                },
                {
                    id: 2,
                    sender: "Nesti",
                    content: "Bonjour! Je peux vous suggérer la dernière expo sur l'art thérapie à 16h",
                    timestamp: new Date(Date.now() - 60000).toISOString(),
                    type: "bot",
                    suggestions: ["En savoir plus", "Réserver", "Autres suggestions"]
                }
            ],
            activities: [
                {
                    id: 1,
                    title: "Expo sur l'art-thérapie",
                    location: "Musée de l'art moderne",
                    date: new Date(Date.now() + 86400000).toISOString(),
                    price: "Gratuit",
                    accessibility: ["Accessible PMR", "Audio-guide"],
                    rating: 4.8,
                    category: "Culture",
                    ageRange: "6+"
                },
                {
                    id: 2,
                    title: "Atelier cuisine du monde",
                    location: "Centre culturel",
                    date: new Date(Date.now() + 172800000).toISOString(),
                    price: "15€",
                    accessibility: ["Accessible PMR", "Traduction LSF"],
                    rating: 4.9,
                    category: "Cuisine",
                    ageRange: "Tous âges"
                },
                {
                    id: 3,
                    title: "Parcours nature adapté",
                    location: "Parc municipal",
                    date: new Date(Date.now() + 259200000).toISOString(),
                    price: "5€",
                    accessibility: ["Accessible PMR", "Chiens guide acceptés"],
                    rating: 4.7,
                    category: "Nature",
                    ageRange: "Tous âges"
                }
            ]
        };
        
        // ========== INITIALISATION ==========
        document.addEventListener('DOMContentLoaded', function() {
            // Charger les données depuis le localStorage ou utiliser les données de démo
            loadData();
            
            // Initialiser l'interface
            initUI();
            
            // Initialiser les écouteurs d'événements
            initEventListeners();
            
            // Rendre la vue actuelle
            renderCurrentView();
        });
        
        // ========== GESTION DES DONNÉES ==========
        function loadData() {
            // Essayer de charger depuis le localStorage
            const savedData = localStorage.getItem('nesti_data');
            
            if (savedData) {
                try {
                    const parsedData = JSON.parse(savedData);
                    state.events = parsedData.events || demoData.events;
                    state.tasks = parsedData.tasks || demoData.tasks;
                    state.messages = parsedData.messages || demoData.messages;
                    state.activities = parsedData.activities || demoData.activities;
                } catch (e) {
                    console.error("Erreur lors du chargement des données:", e);
                    loadDemoData();
                }
            } else {
                loadDemoData();
            }
        }
        
        function loadDemoData() {
            state.events = demoData.events;
            state.tasks = demoData.tasks;
            state.messages = demoData.messages;
            state.activities = demoData.activities;
        }
        
        function saveData() {
            const dataToSave = {
                events: state.events,
                tasks: state.tasks,
                messages: state.messages,
                activities: state.activities
            };
            
            localStorage.setItem('nesti_data', JSON.stringify(dataToSave));
        }
        
        // ========== INITIALISATION DE L'INTERFACE ==========
        function initUI() {
            // Appliquer le thème
            applyTheme();
            
            // Générer le calendrier
            generateCalendar();
            
            // Remplir les événements d'aujourd'hui
            renderTodaysEvents();
            
            // Remplir les tâches
            renderTasks();
            
            // Remplir les messages
            renderMessages();
            
            // Remplir les activités
            renderActivities();
        }
        
        function initEventListeners() {
            // Navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function() {
                    const view = this.getAttribute('data-view');
                    switchView(view);
                });
            });
            
            // Thème
            document.getElementById('theme-toggle').addEventListener('click', toggleTheme);
            
            // Déconnexion
            document.getElementById('logout-btn').addEventListener('click', logout);
            
            // Modals événements
            document.getElementById('add-event-btn').addEventListener('click', openEventModal);
            document.getElementById('event-modal-close').addEventListener('click', closeEventModal);
            document.getElementById('event-cancel').addEventListener('click', closeEventModal);
            document.getElementById('event-form').addEventListener('submit', handleEventSubmit);
            
            // Modals tâches
            document.getElementById('add-task-btn').addEventListener('click', openTaskModal);
            document.getElementById('task-modal-close').addEventListener('click', closeTaskModal);
            document.getElementById('task-cancel').addEventListener('click', closeTaskModal);
            document.getElementById('task-form').addEventListener('submit', handleTaskSubmit);
            
            // Chat
            document.getElementById('chat-send').addEventListener('click', sendMessage);
            document.getElementById('chat-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendMessage();
            });
            
            // Chat complet
            document.getElementById('full-chat-send').addEventListener('click', sendFullMessage);
            document.getElementById('full-chat-input').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') sendFullMessage();
            });
            
            // Méditation
            document.getElementById('start-meditation').addEventListener('click', toggleMeditation);
            document.getElementById('full-start-meditation').addEventListener('click', toggleFullMeditation);
            
            // Options de méditation
            document.querySelectorAll('.meditation-options button').forEach(button => {
                button.addEventListener('click', function() {
                    const duration = parseInt(this.getAttribute('data-duration'));
                    setMeditationDuration(duration);
                });
            });
            
            // Suivi d'humeur
            document.querySelectorAll('.mood-option').forEach(option => {
                option.addEventListener('click', function() {
                    const mood = this.getAttribute('data-mood');
                    trackMood(mood);
                });
            });
            
            // Filtres d'activités
            document.querySelectorAll('.filter-bar .filter-btn').forEach(button => {
                button.addEventListener('click', function() {
                    const filter = this.getAttribute('data-filter');
                    filterActivities(filter);
                });
            });
            
            // Navigation du calendrier
            document.getElementById('prev-month').addEventListener('click', function() {
                navigateMonth(-1);
            });
            
            document.getElementById('next-month').addEventListener('click', function() {
                navigateMonth(1);
            });
            
            // Notifications
            document.getElementById('notification-close').addEventListener('click', hideNotification);
        }
        
        // ========== GESTION DES VUES ==========
        function switchView(view) {
            // Mettre à jour la navigation
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            document.querySelector(`.nav-item[data-view="${view}"]`).classList.add('active');
            
            // Cacher toutes les vues
            document.querySelectorAll('.view-content').forEach(viewEl => {
                viewEl.classList.add('hidden');
            });
            
            // Afficher la vue actuelle
            document.getElementById(`${view}-view`).classList.remove('hidden');
            
            // Mettre à jour le titre
            document.getElementById('page-title').textContent = getViewTitle(view);
            document.getElementById('page-subtitle').textContent = getViewSubtitle(view);
            
            // Mettre à jour l'état
            state.currentView = view;
            
            // Rendre le contenu spécifique à la vue
            renderViewContent(view);
        }
        
        function getViewTitle(view) {
            const titles = {
                dashboard: "Dashboard",
                chat: "Chat familial",
                calendar: "Calendrier",
                activities: "Activités",
                wellbeing: "Bien-être",
                tasks: "Tâches",
                settings: "Paramètres"
            };
            
            return titles[view] || "Nesti";
        }
        
        function getViewSubtitle(view) {
            const subtitles = {
                dashboard: "Organisation et bien-être pour toute la famille",
                chat: "Discutez avec votre famille et l'assistant Nesti",
                calendar: "Planifiez vos événements familialux",
                activities: "Découvrez des activités inclusives",
                wellbeing: "Prenez soin de votre bien-être familial",
                tasks: "Gérez vos tâches quotidiennes",
                settings: "Personnalisez votre expérience Nesti"
            };
            
            return subtitles[view] || "";
        }
        
        function renderViewContent(view) {
            switch (view) {
                case "dashboard":
                    renderDashboard();
                    break;
                case "chat":
                    renderChat();
                    break;
                case "calendar":
                    renderCalendar();
                    break;
                case "activities":
                    renderActivitiesView();
                    break;
                case "wellbeing":
                    renderWellbeing();
                    break;
                case "tasks":
                    renderTasksView();
                    break;
                case "settings":
                    renderSettings();
                    break;
            }
        }
        
        function renderCurrentView() {
            renderViewContent(state.currentView);
        }
        
        // ========== FONCTIONNALITÉS DU TABLEAU DE BORD ==========
        function renderDashboard() {
            // Cette fonction est appelée lorsque le tableau de bord est affiché
            // On peut mettre à jour les statistiques ou autres éléments dynamiques
            updateStats();
        }
        
        function updateStats() {
            // Mettre à jour les statistiques affichées sur le tableau de bord
            const today = new Date().toISOString().split('T')[0];
            const todayEvents = state.events.filter(event => event.date === today).length;
            const pendingTasks = state.tasks.filter(task => !task.completed).length;
            
            document.querySelector('.stat-card:nth-child(1) .stat-value').textContent = todayEvents;
            document.querySelector('.stat-card:nth-child(2) .stat-value').textContent = pendingTasks;
        }
        
        // ========== CALENDRIER ==========
        function generateCalendar() {
            const calendarContainer = document.getElementById('calendar-container');
            const today = new Date();
            const currentMonth = today.getMonth();
            const currentYear = today.getFullYear();
            
            // Créer l'en-tête du calendrier avec les jours de la semaine
            const weekdays = ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'];
            let calendarHTML = '<div class="calendar-grid">';
            
            // Ajouter les en-têtes des jours
            weekdays.forEach(day => {
                calendarHTML += `<div class="calendar-weekday">${day}</div>`;
            });
            
            // Obtenir le premier jour du mois
            const firstDay = new Date(currentYear, currentMonth, 1);
            // Obtenir le dernier jour du mois
            const lastDay = new Date(currentYear, currentMonth + 1, 0);
            
            // Calculer le nombre de jours à afficher avant le premier jour du mois
            const daysOffset = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1;
            
            // Commencer à partir du lundi précédent si nécessaire
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - daysOffset);
            
            // Générer les jours du calendrier
            for (let i = 0; i < 42; i++) {
                const currentDate = new Date(startDate);
                currentDate.setDate(startDate.getDate() + i);
                
                const isToday = currentDate.toDateString() === today.toDateString();
                const isCurrentMonth = currentDate.getMonth() === currentMonth;
                const hasEvent = state.events.some(event => {
                    const eventDate = new Date(event.date);
                    return eventDate.toDateString() === currentDate.toDateString();
                });
                
                let dayClass = 'calendar-day';
                if (isToday) dayClass += ' today';
                if (!isCurrentMonth) dayClass += ' other-month';
                if (hasEvent) dayClass += ' has-event';
                
                calendarHTML += `
                    <div class="${dayClass}" data-date="${currentDate.toISOString().split('T')[0]}">
                        ${currentDate.getDate()}
                    </div>
                `;
            }
            
            calendarHTML += '</div>';
            calendarContainer.innerHTML = calendarHTML;
            
            // Ajouter les écouteurs d'événements pour les jours
            document.querySelectorAll('.calendar-day').forEach(day => {
                day.addEventListener('click', function() {
                    const date = this.getAttribute('data-date');
                    selectDate(date);
                });
            });
        }
        
        function selectDate(date) {
            // Mettre en surbrillance la date sélectionnée
            document.querySelectorAll('.calendar-day').forEach(day => {
                day.classList.remove('selected');
            });
            
            document.querySelector(`.calendar-day[data-date="${date}"]`).classList.add('selected');
            
            // Afficher les événements de cette date
            showEventsForDate(date);
        }
        
        function showEventsForDate(date) {
            const events = state.events.filter(event => event.date === date);
            const eventsList = document.getElementById('today-events-list');
            
            if (events.length === 0) {
                eventsList.innerHTML = '<p class="no-events">Aucun événement prévu pour cette date</p>';
                return;
            }
            
            let eventsHTML = '';
            events.forEach(event => {
                eventsHTML += `
                    <div class="event-item">
                        <div class="event-time">${event.time}</div>
                        <div class="event-details">
                            <div class="event-title">${event.title}</div>
                            <div class="event-description">${event.description}</div>
                        </div>
                    </div>
                `;
            });
            
            eventsList.innerHTML = eventsHTML;
        }
        
        function renderTodaysEvents() {
            const today = new Date().toISOString().split('T')[0];
            showEventsForDate(today);
        }
        
        // ========== TÂCHES ==========
        function renderTasks() {
            const taskList = document.getElementById('task-list-container');
            let tasksHTML = '';
            
            state.tasks.forEach(task => {
                const priorityClass = `priority-${task.priority}`;
                
                tasksHTML += `
                    <div class="task-item" data-task-id="${task.id}">
                        <div class="task-checkbox ${task.completed ? 'checked' : ''}" data-task-id="${task.id}">
                            ${task.completed ? '<i class="fas fa-check"></i>' : ''}
                        </div>
                        <div class="task-details">
                            <div class="task-title">${task.title}</div>
                            <div class="task-meta">
                                <span>${task.assignee}</span>
                                <span class="task-priority ${priorityClass}">${getPriorityLabel(task.priority)}</span>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            taskList.innerHTML = tasksHTML;
            
            // Ajouter les écouteurs d'événements pour les cases à cocher
            document.querySelectorAll('.task-checkbox').forEach(checkbox => {
                checkbox.addEventListener('click', function() {
                    const taskId = this.getAttribute('data-task-id');
                    toggleTaskCompletion(taskId);
                });
            });
        }
        
        function getPriorityLabel(priority) {
            const labels = {
                low: 'Basse',
                medium: 'Moyenne',
                high: 'Haute'
            };
            
            return labels[priority] || priority;
        }
        
        function toggleTaskCompletion(taskId) {
            const task = state.tasks.find(t => t.id == taskId);
            if (task) {
                task.completed = !task.completed;
                saveData();
                renderTasks();
                
                showNotification(
                    task.completed ? 'Tâche complétée' : 'Tâche réactivée',
                    `"${task.title}" a été ${task.completed ? 'complétée' : 'réactivée'}`,
                    'success'
                );
            }
        }
        
        // ========== CHAT ==========
        function renderMessages() {
            const chatMessages = document.getElementById('chat-messages');
            let messagesHTML = '';
            
            state.messages.forEach(message => {
                const time = new Date(message.timestamp).toLocaleTimeString('fr-FR', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                if (message.type === 'user') {
                    messagesHTML += `
                        <div class="message user">
                            <div class="message-content">${message.content}</div>
                            <div class="message-time">${time}</div>
                        </div>
                    `;
                } else {
                    let suggestionsHTML = '';
                    if (message.suggestions && message.suggestions.length > 0) {
                        suggestionsHTML = '<div class="message-suggestions">';
                        message.suggestions.forEach(suggestion => {
                            suggestionsHTML += `<div class="suggestion">${suggestion}</div>`;
                        });
                        suggestionsHTML += '</div>';
                    }
                    
                    messagesHTML += `
                        <div class="message bot">
                            <div class="message-content">${message.content}</div>
                            ${suggestionsHTML}
                            <div class="message-time">${time}</div>
                        </div>
                    `;
                }
            });
            
            chatMessages.innerHTML = messagesHTML;
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            
            if (message === '') return;
            
            // Ajouter le message de l'utilisateur
            const userMessage = {
                id: Date.now(),
                sender: state.user.name,
                content: message,
                timestamp: new Date().toISOString(),
                type: 'user'
            };
            
            state.messages.push(userMessage);
            saveData();
            renderMessages();
            
            // Réinitialiser l'input
            input.value = '';
            
            // Simuler une réponse de l'IA après un délai
            setTimeout(() => {
                const aiResponse = generateAIResponse(message);
                state.messages.push(aiResponse);
                saveData();
                renderMessages();
            }, 1000);
        }
        
        function generateAIResponse(message) {
            const responses = [
                "C'est une excellente idée ! Voulez-vous que je vous aide à organiser cela ?",
                "J'ai trouvé quelques activités qui pourraient vous intéresser. Souhaitez-vous les voir ?",
                "Parfait ! Je vais ajouter cela à votre planning familial.",
                "Excellente question ! Laissez-moi vous proposer quelques suggestions personnalisées."
            ];
            
            return {
                id: Date.now(),
                sender: 'Nesti',
                content: responses[Math.floor(Math.random() * responses.length)],
                timestamp: new Date().toISOString(),
                type: 'bot',
                suggestions: ['En savoir plus', 'Réserver', 'Autres suggestions']
            };
        }
        
        // ========== VUE CHAT COMPLÈTE ==========
        function renderChat() {
            const chatMessages = document.getElementById('full-chat-messages');
            let messagesHTML = '';
            
            state.messages.forEach(message => {
                const time = new Date(message.timestamp).toLocaleTimeString('fr-FR', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
                
                if (message.type === 'user') {
                    messagesHTML += `
                        <div class="message user">
                            <div class="message-content">${message.content}</div>
                            <div class="message-time">${time}</div>
                        </div>
                    `;
                } else {
                    let suggestionsHTML = '';
                    if (message.suggestions && message.suggestions.length > 0) {
                        suggestionsHTML = '<div class="message-suggestions">';
                        message.suggestions.forEach(suggestion => {
                            suggestionsHTML += `<div class="suggestion">${suggestion}</div>`;
                        });
                        suggestionsHTML += '</div>';
                    }
                    
                    messagesHTML += `
                        <div class="message bot">
                            <div class="message-content">${message.content}</div>
                            ${suggestionsHTML}
                            <div class="message-time">${time}</div>
                        </div>
                    `;
                }
            });
            
            chatMessages.innerHTML = messagesHTML;
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        
        function sendFullMessage() {
            const input = document.getElementById('full-chat-input');
            const message = input.value.trim();
            
            if (message === '') return;
            
            // Ajouter le message de l'utilisateur
            const userMessage = {
                id: Date.now(),
                sender: state.user.name,
                content: message,
                timestamp: new Date().toISOString(),
                type: 'user'
            };
            
            state.messages.push(userMessage);
            saveData();
            renderChat();
            
            // Réinitialiser l'input
            input.value = '';
            
            // Simuler une réponse de l'IA après un délai
            setTimeout(() => {
                const aiResponse = generateAIResponse(message);
                state.messages.push(aiResponse);
                saveData();
                renderChat();
            }, 1000);
        }
        
        // ========== VUE CALENDRIER COMPLÈTE ==========
        function renderCalendar() {
            generateFullCalendar();
            updateMonthYearDisplay();
        }
        
        function generateFullCalendar() {
            const calendarContainer = document.getElementById('full-calendar-container');
            const month = state.currentMonth;
            const year = state.currentYear;
            
            // Créer l'en-tête du calendrier avec les jours de la semaine
            const weekdays = ['Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam', 'Dim'];
            let calendarHTML = '<div class="calendar-grid">';
            
            // Ajouter les en-têtes des jours
            weekdays.forEach(day => {
                calendarHTML += `<div class="calendar-weekday">${day}</div>`;
            });
            
            // Obtenir le premier jour du mois
            const firstDay = new Date(year, month, 1);
            // Obtenir le dernier jour du mois
            const lastDay = new Date(year, month + 1, 0);
            
            // Calculer le nombre de jours à afficher avant le premier jour du mois
            const daysOffset = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1;
            
            // Commencer à partir du lundi précédent si nécessaire
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - daysOffset);
            
            // Générer les jours du calendrier
            for (let i = 0; i < 42; i++) {
                const currentDate = new Date(startDate);
                currentDate.setDate(startDate.getDate() + i);
                
                const today = new Date();
                const isToday = currentDate.toDateString() === today.toDateString();
                const isCurrentMonth = currentDate.getMonth() === month;
                const hasEvent = state.events.some(event => {
                    const eventDate = new Date(event.date);
                    return eventDate.toDateString() === currentDate.toDateString();
                });
                
                let dayClass = 'calendar-day';
                if (isToday) dayClass += ' today';
                if (!isCurrentMonth) dayClass += ' other-month';
                if (hasEvent) dayClass += ' has-event';
                
                calendarHTML += `
                    <div class="${dayClass}" data-date="${currentDate.toISOString().split('T')[0]}">
                        ${currentDate.getDate()}
                    </div>
                `;
            }
            
            calendarHTML += '</div>';
            calendarContainer.innerHTML = calendarHTML;
            
            // Ajouter les écouteurs d'événements pour les jours
            document.querySelectorAll('#full-calendar-container .calendar-day').forEach(day => {
                day.addEventListener('click', function() {
                    const date = this.getAttribute('data-date');
                    selectFullCalendarDate(date);
                });
            });
        }
        
        function selectFullCalendarDate(date) {
            // Mettre en surbrillance la date sélectionnée
            document.querySelectorAll('#full-calendar-container .calendar-day').forEach(day => {
                day.classList.remove('selected');
            });
            
            document.querySelector(`#full-calendar-container .calendar-day[data-date="${date}"]`).classList.add('selected');
            
            // Afficher les événements de cette date
            showFullCalendarEventsForDate(date);
        }
        
        function showFullCalendarEventsForDate(date) {
            const events = state.events.filter(event => event.date === date);
            const eventsList = document.getElementById('calendar-events-list');
            
            if (events.length === 0) {
                eventsList.innerHTML = '<p class="no-events">Aucun événement prévu pour cette date</p>';
                return;
            }
            
            let eventsHTML = '';
            events.forEach(event => {
                eventsHTML += `
                    <div class="event-item">
                        <div class="event-time">${event.time}</div>
                        <div class="event-details">
                            <div class="event-title">${event.title}</div>
                            <div class="event-description">${event.description}</div>
                        </div>
                        <button class="btn btn-sm btn-secondary event-action" data-event-id="${event.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                `;
            });
            
            eventsList.innerHTML = eventsHTML;
        }
        
        function navigateMonth(direction) {
            state.currentMonth += direction;
            
            if (state.currentMonth < 0) {
                state.currentMonth = 11;
                state.currentYear--;
            } else if (state.currentMonth > 11) {
                state.currentMonth = 0;
                state.currentYear++;
            }
            
            generateFullCalendar();
            updateMonthYearDisplay();
        }
        
        function updateMonthYearDisplay() {
            const monthNames = ["Janvier", "Février", "Mars", "Avril", "Mai", "Juin",
                "Juillet", "Août", "Septembre", "Octobre", "Novembre", "Décembre"
            ];
            
            document.getElementById('current-month-year').textContent = 
                `${monthNames[state.currentMonth]} ${state.currentYear}`;
        }
        
        // ========== ACTIVITÉS ==========
        function renderActivities() {
            const activityList = document.getElementById('activity-list');
            let activitiesHTML = '';
            
            state.activities.slice(0, 3).forEach(activity => {
                activitiesHTML += `
                    <div class="activity-item">
                        <div class="activity-header">
                            <div>
                                <div class="activity-title">${activity.title}</div>
                                <div class="activity-location">
                                    <i class="fas fa-map-marker-alt"></i>
                                    ${activity.location}
                                </div>
                            </div>
                            <div class="activity-rating">
                                <i class="fas fa-star"></i>
                                ${activity.rating}
                            </div>
                        </div>
                        <div class="activity-tags">
                            <span class="activity-tag">${activity.category}</span>
                            <span class="activity-tag">${activity.ageRange}</span>
                            <span class="activity-tag">${activity.price}</span>
                        </div>
                    </div>
                `;
            });
            
            activityList.innerHTML = activitiesHTML;
        }
        
        // ========== VUE ACTIVITÉS COMPLÈTE ==========
        function renderActivitiesView() {
            const activitiesGrid = document.getElementById('activities-grid');
            let activitiesHTML = '';
            
            state.activities.forEach(activity => {
                activitiesHTML += `
                    <div class="activity-card" data-category="${activity.category.toLowerCase()}">
                        <div class="activity-card-header">
                            <div class="activity-card-title">${activity.title}</div>
                            <div class="activity-card-rating">
                                <i class="fas fa-star"></i>
                                ${activity.rating}
                            </div>
                        </div>
                        <div class="activity-card-location">
                            <i class="fas fa-map-marker-alt"></i>
                            ${activity.location}
                        </div>
                        <div class="activity-card-date">
                            <i class="fas fa-calendar"></i>
                            ${formatDate(activity.date)}
                        </div>
                        <div class="activity-card-info">
                            <span class="activity-card-price">${activity.price}</span>
                            <span class="activity-card-age">${activity.ageRange}</span>
                        </div>
                        <div class="activity-card-accessibility">
                            ${activity.accessibility.map(acc => `<span class="accessibility-tag">${acc}</span>`).join('')}
                        </div>
                        <div class="activity-card-actions">
                            <button class="btn btn-primary btn-sm">
                                <i class="fas fa-info-circle"></i>
                                Détails
                            </button>
                            <button class="btn btn-accent btn-sm">
                                <i class="fas fa-calendar-plus"></i>
                                Planifier
                            </button>
                        </div>
                    </div>
                `;
            });
            
            activitiesGrid.innerHTML = activitiesHTML;
        }
        
        function filterActivities(filter) {
            // Mettre à jour les boutons de filtre
            document.querySelectorAll('.filter-bar .filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            document.querySelector(`.filter-bar .filter-btn[data-filter="${filter}"]`).classList.add('active');
            
            // Filtrer les activités
            const activityCards = document.querySelectorAll('.activity-card');
            
            activityCards.forEach(card => {
                if (filter === 'all' || card.getAttribute('data-category') === filter) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        }
        
        // ========== BIEN-ÊTRE ==========
        function toggleMeditation() {
            const button = document.getElementById('start-meditation');
            const timer = document.getElementById('meditation-timer');
            
            if (!state.meditation.active) {
                // Démarrer la méditation
                state.meditation.active = true;
                state.meditation.timer = state.meditation.duration;
                
                button.innerHTML = '<i class="fas fa-stop"></i><span>Arrêter la méditation</span>';
                button.classList.add('stop');
                
                // Mettre à jour le timer
                updateMeditationTimer();
                
                // Démarrer le compte à rebours
                state.meditation.interval = setInterval(() => {
                    state.meditation.timer--;
                    updateMeditationTimer();
                    
                    if (state.meditation.timer <= 0) {
                        clearInterval(state.meditation.interval);
                        state.meditation.active = false;
                        
                        button.innerHTML = '<i class="fas fa-play"></i><span>Démarrer la méditation</span>';
                        button.classList.remove('stop');
                        
                        showNotification(
                            'Méditation terminée',
                            'Vous avez complété une session de méditation de 15 minutes!',
                            'success'
                        );
                    }
                }, 1000);
            } else {
                // Arrêter la méditation
                clearInterval(state.meditation.interval);
                state.meditation.active = false;
                state.meditation.timer = state.meditation.duration;
                
                button.innerHTML = '<i class="fas fa-play"></i><span>Démarrer la méditation</span>';
                button.classList.remove('stop');
                
                updateMeditationTimer();
                
                showNotification(
                    'Méditation arrêtée',
                    'Vous pouvez reprendre votre session plus tard.',
                    'info'
                );
            }
        }
        
        function toggleFullMeditation() {
            const button = document.getElementById('full-start-meditation');
            const timer = document.getElementById('full-meditation-timer');
            
            if (!state.meditation.active) {
                // Démarrer la méditation
                state.meditation.active = true;
                state.meditation.timer = state.meditation.duration;
                
                button.innerHTML = '<i class="fas fa-stop"></i><span>Arrêter la méditation</span>';
                button.classList.add('stop');
                
                // Mettre à jour le timer
                updateFullMeditationTimer();
                
                // Démarrer le compte à rebours
                state.meditation.interval = setInterval(() => {
                    state.meditation.timer--;
                    updateFullMeditationTimer();
                    
                    if (state.meditation.timer <= 0) {
                        clearInterval(state.meditation.interval);
                        state.meditation.active = false;
                        
                        button.innerHTML = '<i class="fas fa-play"></i><span>Démarrer la méditation</span>';
                        button.classList.remove('stop');
                        
                        showNotification(
                            'Méditation terminée',
                            'Vous avez complété une session de méditation!',
                            'success'
                        );
                    }
                }, 1000);
            } else {
                // Arrêter la méditation
                clearInterval(state.meditation.interval);
                state.meditation.active = false;
                state.meditation.timer = state.meditation.duration;
                
                button.innerHTML = '<i class="fas fa-play"></i><span>Démarrer la méditation</span>';
                button.classList.remove('stop');
                
                updateFullMeditationTimer();
                
                showNotification(
                    'Méditation arrêtée',
                    'Vous pouvez reprendre votre session plus tard.',
                    'info'
                );
            }
        }
        
        function setMeditationDuration(duration) {
            state.meditation.duration = duration;
            state.meditation.timer = duration;
            
            const minutes = Math.floor(duration / 60);
            document.getElementById('full-meditation-timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:00`;
        }
        
        function updateMeditationTimer() {
            const timer = document.getElementById('meditation-timer');
            const minutes = Math.floor(state.meditation.timer / 60);
            const seconds = state.meditation.timer % 60;
            
            timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function updateFullMeditationTimer() {
            const timer = document.getElementById('full-meditation-timer');
            const minutes = Math.floor(state.meditation.timer / 60);
            const seconds = state.meditation.timer % 60;
            
            timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        function trackMood(mood) {
            // Mettre à jour l'interface
            document.querySelectorAll('.mood-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            document.querySelector(`.mood-option[data-mood="${mood}"]`).classList.add('selected');
            
            // Enregistrer l'humeur (dans un cas réel, on enverrait ces données à un serveur)
            const moodData = {
                date: new Date().toISOString().split('T')[0],
                mood: parseInt(mood),
                userId: state.user.id
            };
            
            showNotification(
                'Humeur enregistrée',
                'Merci d\'avoir partagé votre état d\'esprit aujourd\'hui.',
                'success'
            );
        }
        
        function renderWellbeing() {
            // Mettre à jour le timer de méditation
            const minutes = Math.floor(state.meditation.duration / 60);
            document.getElementById('full-meditation-timer').textContent = 
                `${minutes.toString().padStart(2, '0')}:00`;
        }
        
        // ========== VUE TÂCHES COMPLÈTE ==========
        function renderTasksView() {
            const taskList = document.getElementById('full-task-list');
            let tasksHTML = '';
            
            state.tasks.forEach(task => {
                const priorityClass = `priority-${task.priority}`;
                const dueDate = new Date(task.dueDate);
                const today = new Date();
                const isOverdue = !task.completed && dueDate < today && dueDate.toDateString() !== today.toDateString();
                
                tasksHTML += `
                    <div class="task-item ${isOverdue ? 'overdue' : ''}" data-task-id="${task.id}">
                        <div class="task-checkbox ${task.completed ? 'checked' : ''}" data-task-id="${task.id}">
                            ${task.completed ? '<i class="fas fa-check"></i>' : ''}
                        </div>
                        <div class="task-details">
                            <div class="task-title">${task.title}</div>
                            <div class="task-meta">
                                <span>Assigné à: ${task.assignee}</span>
                                <span>Échéance: ${formatDate(task.dueDate)}</span>
                                <span class="task-priority ${priorityClass}">${getPriorityLabel(task.priority)}</span>
                                ${isOverdue ? '<span class="task-overdue">En retard</span>' : ''}
                            </div>
                        </div>
                        <div class="task-actions">
                            <button class="btn btn-sm btn-secondary task-edit" data-task-id="${task.id}">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-danger task-delete" data-task-id="${task.id}">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            
            taskList.innerHTML = tasksHTML;
            
            // Ajouter les écouteurs d'événements pour les cases à cocher
            document.querySelectorAll('#full-task-list .task-checkbox').forEach(checkbox => {
                checkbox.addEventListener('click', function() {
                    const taskId = this.getAttribute('data-task-id');
                    toggleTaskCompletion(taskId);
                });
            });
        }
        
        // ========== VUE PARAMÈTRES ==========
        function renderSettings() {
            // Cette fonction pourrait charger les préférences utilisateur depuis le state
            // et les afficher dans le formulaire des paramètres
        }
        
        // ========== GESTION DES MODALS ==========
        function openEventModal() {
            document.getElementById('event-modal').classList.add('active');
            document.getElementById('event-date').value = new Date().toISOString().split('T')[0];
        }
        
        function closeEventModal() {
            document.getElementById('event-modal').classList.remove('active');
            document.getElementById('event-form').reset();
        }
        
        function handleEventSubmit(e) {
            e.preventDefault();
            
            const newEvent = {
                id: Date.now(),
                title: document.getElementById('event-title').value,
                date: document.getElementById('event-date').value,
                time: document.getElementById('event-time').value,
                description: document.getElementById('event-description').value,
                color: "#1C9DEA",
                createdAt: new Date().toISOString()
            };
            
            state.events.push(newEvent);
            saveData();
            
            closeEventModal();
            renderTodaysEvents();
            generateCalendar();
            updateStats();
            
            showNotification(
                'Événement créé',
                `"${newEvent.title}" a été ajouté à votre calendrier`,
                'success'
            );
        }
        
        function openTaskModal() {
            document.getElementById('task-modal').classList.add('active');
            document.getElementById('task-due-date').value = new Date().toISOString().split('T')[0];
        }
        
        function closeTaskModal() {
            document.getElementById('task-modal').classList.remove('active');
            document.getElementById('task-form').reset();
        }
        
        function handleTaskSubmit(e) {
            e.preventDefault();
            
            const newTask = {
                id: Date.now(),
                title: document.getElementById('task-title').value,
                assignee: document.getElementById('task-assignee').value,
                priority: document.getElementById('task-priority').value,
                dueDate: document.getElementById('task-due-date').value,
                completed: false,
                createdAt: new Date().toISOString()
            };
            
            state.tasks.push(newTask);
            saveData();
            
            closeTaskModal();
            renderTasks();
            updateStats();
            
            showNotification(
                'Tâche créée',
                `"${newTask.title}" a été ajoutée à votre liste`,
                'success'
            );
        }
        
        // ========== GESTION DU THÈME ==========
        function toggleTheme() {
            state.theme = state.theme === 'light' ? 'dark' : 'light';
            applyTheme();
            saveThemePreference();
        }
        
        function applyTheme() {
            const themeToggle = document.getElementById('theme-toggle');
            const icon = themeToggle.querySelector('i');
            const text = themeToggle.querySelector('span');
            
            if (state.theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'dark');
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
                text.textContent = 'Mode clair';
            } else {
                document.documentElement.removeAttribute('data-theme');
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
                text.textContent = 'Mode sombre';
            }
        }
        
        function saveThemePreference() {
            localStorage.setItem('nesti_theme', state.theme);
        }
        
        function loadThemePreference() {
            const savedTheme = localStorage.getItem('nesti_theme');
            if (savedTheme) {
                state.theme = savedTheme;
            }
        }
        
        // ========== NOTIFICATIONS ==========
        function showNotification(title, message, type = 'info') {
            const notification = document.getElementById('notification');
            const notificationIcon = document.getElementById('notification-icon');
            const notificationTitle = document.getElementById('notification-title');
            const notificationMessage = document.getElementById('notification-message');
            
            // Définir l'icône en fonction du type
            notificationIcon.innerHTML = type === 'success' ? 
                '<i class="fas fa-check"></i>' : 
                '<i class="fas fa-info-circle"></i>';
            
            // Définir le titre et le message
            notificationTitle.textContent = title;
            notificationMessage.textContent = message;
            
            // Afficher la notification
            notification.classList.add('active', type);
            
            // Masquer automatiquement après 5 secondes
            setTimeout(() => {
                hideNotification();
            }, 5000);
        }
        
        function hideNotification() {
            const notification = document.getElementById('notification');
            notification.classList.remove('active', 'success', 'info');
        }
        
        // ========== DÉCONNEXION ==========
        function logout() {
            if (confirm('Êtes-vous sûr de vouloir vous déconnecter ?')) {
                state.isAuthenticated = false;
                // Rediriger vers la page de connexion
                window.location.href = 'login.html';
            }
        }
        
        // ========== FONCTIONS UTILITAIRES ==========
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('fr-FR', {
                weekday: 'long',
                day: 'numeric',
                month: 'long',
                year: 'numeric'
            });
        }
    </script>
</body>
</html>

    
    
