<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mon Cocon Familial</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;500;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* Variables de thème pour une ambiance cosy */
        :root {
            --bg-color: #f5f0e1; /* Jaune sable très clair */
            --text-color: #5d4037; /* Marron foncé pour la chaleur */
            --card-bg: #fffbf5;
            --primary-color: #a1887f; /* Taupe doux */
            --secondary-color: #ffab91; /* Corail pastel */
            --border-color: #e0d9c4;
            --box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            --transition-speed: 0.5s;
            --font-family-prose: 'Quicksand', sans-serif;
            --font-family-title: 'Dancing Script', cursive;
        }

        body.dark-mode {
            --bg-color: #2b2b2b;
            --text-color: #e0e0e0;
            --card-bg: #3c3c3c;
            --primary-color: #d7ccc8; /* Gris clair */
            --secondary-color: #ffccbc; /* Rose clair */
            --border-color: #4f4f4f;
            --box-shadow: 0 6px 15px rgba(0, 0, 0, 0.3);
        }

        /* Styles de base */
        body {
            font-family: var(--font-family-prose);
            background-color: var(--bg-color);
            color: var(--text-color);
            margin: 0;
            padding: 2rem 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            line-height: 1.6;
            transition: background-color var(--transition-speed), color var(--transition-speed);
        }

        /* Animation de fond, comme des motifs de papier peint doux */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle, var(--primary-color) 0%, transparent 40%),
                        radial-gradient(circle, var(--secondary-color) 0%, transparent 40%);
            background-size: 400px 400px, 300px 300px;
            background-position: top 20% left 30%, bottom 20% right 40%;
            animation: cozyBreathe 30s infinite ease-in-out alternate;
            opacity: 0.1;
            z-index: -1;
        }
        @keyframes cozyBreathe {
            from { background-position: top 20% left 30%, bottom 20% right 40%; }
            to { background-position: top 25% left 35%, bottom 25% right 45%; }
        }

        /* Conteneurs et mise en page */
        .container {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
            padding: 2rem;
            border-radius: 24px;
            background-color: rgba(var(--text-color), 0.02);
            backdrop-filter: blur(2px);
            animation: cozy-load 1s ease-out;
        }
        @keyframes cozy-load {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        header, footer {
            width: 100%;
            max-width: 1000px;
            text-align: center;
            padding: 1.5rem 0;
        }

        /* Composants de l'interface utilisateur */
        .card {
            background-color: var(--card-bg);
            padding: 2rem;
            border-radius: 16px;
            box-shadow: var(--box-shadow);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            margin-bottom: 2rem;
            position: relative;
            overflow: hidden;
            border: 1px solid var(--border-color);
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
        }
        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 5px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            opacity: 0.3;
            transition: height 0.3s ease;
        }
        .card:hover::before { height: 100%; opacity: 0.1; }

        h1 {
            font-family: var(--font-family-title);
            font-size: clamp(3rem, 7vw, 5rem);
            color: var(--primary-color);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 0;
            animation: title-appear 1.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        @keyframes title-appear {
            from { opacity: 0; transform: scale(0.5); }
            to { opacity: 1; transform: scale(1); }
        }
        h2 {
            font-family: var(--font-family-title);
            font-size: clamp(2rem, 5vw, 3rem);
            color: var(--secondary-color);
            text-align: center;
            margin-bottom: 2rem;
        }
        h3 {
            font-family: var(--font-family-prose);
            font-weight: 700;
            color: var(--primary-color);
            border-bottom: 2px dashed var(--secondary-color);
            display: inline-block;
            padding-bottom: 0.3rem;
            margin-top: 0;
        }
        p {
            font-family: var(--font-family-prose);
            font-size: 1.1rem;
        }

        /* Boutons */
        .button {
            display: inline-block;
            padding: 12px 28px;
            background-color: var(--primary-color);
            color: white;
            text-decoration: none;
            border-radius: 50px;
            font-weight: 700;
            transition: background-color var(--transition-speed), transform 0.2s ease;
            text-align: center;
            border: none;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-top: 1rem;
        }
        .button:hover {
            background-color: var(--secondary-color);
            transform: scale(1.02);
        }

        /* Galerie d'images */
        .image-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        .image-gallery img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            filter: grayscale(10%);
        }
        .image-gallery img:hover {
            transform: scale(1.05) rotate(2deg);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            filter: grayscale(0%);
        }

        /* Formulaires */
        .contact-form label, .quiz-question {
            font-weight: 700;
            margin-bottom: 0.5rem;
            display: block;
        }
        .contact-form input, .contact-form textarea, .quiz-options input {
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            width: 100%;
            margin-bottom: 1rem;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: border-color 0.3s ease;
        }
        .contact-form input:focus, .contact-form textarea:focus {
            outline: none;
            border-color: var(--secondary-color);
        }

        /* Styles spécifiques des sections */
        .story-section {
            display: flex;
            align-items: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }
        .story-section img {
            max-width: 40%;
            border-radius: 16px;
            box-shadow: var(--box-shadow);
        }
        .story-section.reverse {
            flex-direction: row-reverse;
        }

        .memory-entry {
            border-left: 4px solid var(--primary-color);
            padding-left: 1.5rem;
            margin-bottom: 1.5rem;
            position: relative;
            opacity: 0;
            transform: translateX(-20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .memory-entry.is-visible {
            opacity: 1;
            transform: translateX(0);
        }
        .memory-entry::before {
            content: '📌';
            position: absolute;
            left: -15px;
            top: -5px;
            font-size: 1.5rem;
        }
        
    </style>
</head>
<body>
    <button id="theme-toggle" aria-label="Bascule mode sombre/clair" style="position: fixed; top: 20px; right: 20px; background: none; border: none; font-size: 2rem; cursor: pointer; color: var(--text-color); transition: color 0.3s ease;">🌙</button>

    <header>
        <div class="container">
            <h1>Mon Cocon Familial</h1>
            <p>Un recueil de nos plus beaux moments et de nos souvenirs précieux.</p>
        </div>
    </header>

    <main class="container">
        <section class="card">
            <h2>Notre album photo</h2>
            <div id="image-gallery-container"></div>
        </section>

        <section class="card">
            <h2>Nos recettes secrètes</h2>
            <div id="recipes-container"></div>
        </section>

        <section class="card">
            <h2>Le quiz de la famille</h2>
            <div id="quiz-container"></div>
        </section>

        <section class="card">
            <h2>Notre histoire, nos traditions</h2>
            <div id="history-container"></div>
        </section>

        <section class="card">
            <h2>Notre journal de bord</h2>
            <div id="blog-container"></div>
        </section>

        <section class="card">
            <h2>Nos souvenirs les plus précieux</h2>
            <div id="memories-container"></div>
        </section>

        <section class="card">
            <h2>Laissez-nous un petit mot</h2>
            <div id="contact-container"></div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>Merci de faire partie de notre histoire. © 2025</p>
        </div>
    </footer>

    <div id="notification-container"></div>

    <script>
        /**
         * Couche 1 : LES DONNÉES DE L'APPLICATION
         * Toutes les données du site sont stockées ici pour une gestion facile.
         */
        const APP_DATA = {
            images: [
                { src: 'https://images.unsplash.com/photo-1542042168-5e263a2a677e?q=80&w=1470&auto=format&fit=crop', alt: 'Famille souriant sur une plage' },
                { src: 'https://images.unsplash.com/photo-1628151241187-73d28d052d92?q=80&w=1470&auto=format&fit=crop', alt: 'Famille en vacances' },
                { src: 'https://images.unsplash.com/photo-1544458514-633b49c717be?q=80&w=1470&auto=format&fit=crop', alt: 'Repas de famille' },
                { src: 'https://images.unsplash.com/photo-1517404215738-15263e9f9850?q=80&w=1470&auto=format&fit=crop', alt: 'Pique-nique en famille' },
                { src: 'https://images.unsplash.com/photo-1513589255018-b2a63274641c?q=80&w=1470&auto=format&fit=crop', alt: 'Noël en famille' },
                { src: 'https://images.unsplash.com/photo-1582239474944-ec85317796d1?q=80&w=1470&auto=format&fit=crop', alt: 'Anniversaire' },
            ],
            recipes: [
                { title: "Lasagnes à la bolognaise", author: "Maman", description: "Un classique indémodable qui rassemble tout le monde autour de la table. La recette secrète de Maman avec une touche d'amour !", prepTime: "1h30" },
                { title: "Gâteau au chocolat fondant", author: "Papa", description: "Un dessert irrésistible pour les gourmands, toujours réussi et parfait pour les moments de fête.", prepTime: "45min" },
                { title: "Gratin dauphinois", author: "Grand-Mère", description: "La recette traditionnelle qui nous rappelle les dimanches en famille. Un régal simple et réconfortant.", prepTime: "1h" },
            ],
            quizQuestions: [
                { question: "Quel est notre plat préféré du dimanche ?", options: ["Lasagnes", "Pizza", "Riz Cantonais", "Pâtes au pesto"], answer: "Lasagnes" },
                { question: "Quelle est notre destination de vacances préférée ?", options: ["La mer", "La montagne", "La campagne", "La ville"], answer: "La montagne" },
                { question: "Qui est le roi du barbecue l'été ?", options: ["Papa", "Maman", "Thomas", "Léa"], answer: "Papa" },
            ],
            history: {
                title: "De nos origines à nos traditions",
                paragraphs: [
                    "L'histoire de notre famille commence il y a plusieurs générations, dans un petit village au cœur des montagnes. C'est de là que nous tenons notre amour pour les grands espaces et les repas partagés.",
                    "Au fil du temps, notre famille s'est agrandie et dispersée, mais le lien qui nous unit est resté indéfectible. Les fêtes de Noël, les anniversaires d'été et les longs appels du dimanche sont devenus nos rituels sacrés.",
                    "Aujourd'hui, ce site web est notre manière de préserver notre histoire, de la raconter aux générations futures et de célébrer chaque moment qui fait de nous une famille."
                ]
            },
            blogPosts: [
                { title: "Un week-end inoubliable à la campagne", date: "24/10/2024", content: "Nous avons passé un week-end magnifique à la campagne, loin du tumulte de la ville. Le soleil était au rendez-vous et nous avons pu faire de longues balades en forêt, jouer au ballon et se raconter des histoires autour d'un feu de camp. Un vrai moment de bonheur pur." },
                { title: "Les premiers pas de notre petite Léa", date: "12/09/2024", content: "Quelle joie ! Notre petite Léa a fait ses tout premiers pas. Un moment rempli d'émotion que nous n'oublierons jamais. C'est fou comme le temps passe vite, et nous sommes si fiers de la voir grandir chaque jour." }
            ],
            memories: [
                { date: "15/07/2023", event: "Mariage de Thomas et Sophie", description: "Un jour magique, rempli de rires et d'amour. On s'est tous retrouvés pour célébrer cette union sous les oliviers. Le soleil, la musique, et les larmes de joie... un souvenir gravé à jamais." },
                { date: "03/01/2022", event: "Notre grand voyage en Italie", description: "Notre premier grand voyage en famille. Les pizzas, les glaces, les monuments... des souvenirs qui nous font encore sourire. On se promet de recommencer dès que possible !" },
                { date: "24/12/2021", event: "Noël à la maison de Grand-Père", description: "Le Noël le plus mémorable. Toute la famille réunie, les cadeaux sous le sapin, l'odeur du pain d'épices et les histoires de Grand-Père au coin du feu." }
            ]
        };

        /**
         * Couche 2 : GESTION DE L'INTERFACE UTILISATEUR (UI)
         * Fonctions pour créer les éléments HTML et les afficher.
         */
        const UI = {
            createElement: (tag, attributes = {}, ...children) => {
                const element = document.createElement(tag);
                for (const key in attributes) {
                    element.setAttribute(key, attributes[key]);
                }
                children.forEach(child => {
                    if (typeof child === 'string') {
                        element.appendChild(document.createTextNode(child));
                    } else {
                        element.appendChild(child);
                    }
                });
                return element;
            },

            renderGallery: (parent) => {
                const gallery = UI.createElement('div', { class: 'image-gallery' });
                APP_DATA.images.forEach(image => {
                    const img = UI.createElement('img', { src: image.src, alt: image.alt, loading: 'lazy' });
                    gallery.appendChild(img);
                });
                parent.appendChild(gallery);
            },

            renderRecipes: (parent) => {
                const list = UI.createElement('div');
                APP_DATA.recipes.forEach(recipe => {
                    const item = UI.createElement('div', { class: 'recipe-item' });
                    item.innerHTML = `
                        <h3>${recipe.title}</h3>
                        <p><strong>Par :</strong> ${recipe.author}</p>
                        <p>${recipe.description}</p>
                        <p><small>Préparation : ${recipe.prepTime}</small></p>
                        <hr style="border: 0; border-top: 1px solid var(--border-color); margin: 1.5rem 0;">
                    `;
                    list.appendChild(item);
                });
                parent.appendChild(list);
            },

            renderQuiz: (parent) => {
                let score = 0;
                let currentQuestionIndex = 0;
                const container = UI.createElement('div', { class: 'quiz-container' });
                const questionDiv = UI.createElement('div', { id: 'quiz-questions' });
                const resultDiv = UI.createElement('div', { id: 'quiz-result' });
                const button = UI.createElement('button', { class: 'button', id: 'quiz-button' }, 'Lancer le quiz !');

                const renderQuestion = () => {
                    questionDiv.innerHTML = '';
                    if (currentQuestionIndex >= APP_DATA.quizQuestions.length) {
                        resultDiv.textContent = `Quiz terminé ! Votre score est de ${score} sur ${APP_DATA.quizQuestions.length}.`;
                        button.textContent = 'Recommencer';
                        currentQuestionIndex = 0;
                        score = 0;
                        return;
                    }
                    const q = APP_DATA.quizQuestions[currentQuestionIndex];
                    const questionElement = UI.createElement('div', { class: 'quiz-question' }, q.question);
                    const optionsContainer = UI.createElement('div', { class: 'quiz-options' });
                    q.options.forEach(option => {
                        const label = UI.createElement('label');
                        const input = UI.createElement('input', { type: 'radio', name: `question-${currentQuestionIndex}`, value: option });
                        label.appendChild(input);
                        label.appendChild(document.createTextNode(option));
                        optionsContainer.appendChild(label);
                    });
                    questionDiv.appendChild(questionElement);
                    questionDiv.appendChild(optionsContainer);
                    button.textContent = 'Répondre';
                };

                button.addEventListener('click', () => {
                    if (button.textContent === 'Lancer le quiz !') {
                        renderQuestion();
                    } else if (button.textContent === 'Répondre') {
                        const selectedOption = document.querySelector(`input[name="question-${currentQuestionIndex}"]:checked`);
                        if (selectedOption) {
                            if (selectedOption.value === APP_DATA.quizQuestions[currentQuestionIndex].answer) {
                                score++;
                                resultDiv.textContent = 'Bonne réponse ! 🎉';
                            } else {
                                resultDiv.textContent = `Mauvaise réponse. La bonne réponse était "${APP_DATA.quizQuestions[currentQuestionIndex].answer}".`;
                            }
                            currentQuestionIndex++;
                            setTimeout(() => {
                                renderQuestion();
                                resultDiv.textContent = '';
                            }, 1500);
                        } else {
                            alert('Veuillez sélectionner une option !');
                        }
                    } else if (button.textContent === 'Recommencer') {
                        renderQuestion();
                        resultDiv.textContent = '';
                    }
                });

                container.appendChild(questionDiv);
                container.appendChild(resultDiv);
                container.appendChild(button);
                parent.appendChild(container);
            },

            renderHistory: (parent) => {
                const historyDiv = UI.createElement('div');
                APP_DATA.history.paragraphs.forEach((pText, index) => {
                    const p = UI.createElement('p', { class: 'fade-in', style: `transition-delay: ${index * 0.2}s;` }, pText);
                    historyDiv.appendChild(p);
                });
                parent.appendChild(historyDiv);
            },

            renderBlog: (parent) => {
                const blogContainer = UI.createElement('div');
                APP_DATA.blogPosts.forEach((post, index) => {
                    const postDiv = UI.createElement('div', { class: 'card blog-post fade-in', style: `transition-delay: ${index * 0.2}s;` });
                    postDiv.innerHTML = `
                        <h3>${post.title}</h3>
                        <p style="font-size: 0.9em; opacity: 0.7;">Publié le ${post.date}</p>
                        <p>${post.content}</p>
                    `;
                    blogContainer.appendChild(postDiv);
                });
                parent.appendChild(blogContainer);
            },

            renderMemories: (parent) => {
                const memoriesContainer = UI.createElement('div');
                APP_DATA.memories.forEach((memory, index) => {
                    const memoryDiv = UI.createElement('div', { class: 'memory-entry' });
                    const heading = UI.createElement('h3', {}, `🗓 ${memory.date} - ${memory.event}`);
                    const description = UI.createElement('p', {}, memory.description);
                    memoryDiv.appendChild(heading);
                    memoryDiv.appendChild(description);
                    memoriesContainer.appendChild(memoryDiv);
                });
                parent.appendChild(memoriesContainer);
            },

            renderContactForm: (parent) => {
                const form = UI.createElement('form', { class: 'contact-form' });
                form.innerHTML = `
                    <label for="name">Votre nom :</label>
                    <input type="text" id="name" required>
                    <label for="email">Votre email :</label>
                    <input type="email" id="email" required>
                    <label for="message">Votre message :</label>
                    <textarea id="message" rows="5" required></textarea>
                `;
                const button = UI.createElement('button', { type: 'submit', class: 'button' }, 'Envoyer');
                form.appendChild(button);
                parent.appendChild(form);
            },
        };

        /**
         * Couche 3 : LA LOGIQUE DE L'APPLICATION
         * Initialisation et événements.
         */
        document.addEventListener('DOMContentLoaded', () => {

            // Remplissage dynamique des sections avec les données
            UI.renderGallery(document.getElementById('image-gallery-container'));
            UI.renderRecipes(document.getElementById('recipes-container'));
            UI.renderQuiz(document.getElementById('quiz-container'));
            UI.renderHistory(document.getElementById('history-container'));
            UI.renderBlog(document.getElementById('blog-container'));
            UI.renderMemories(document.getElementById('memories-container'));
            UI.renderContactForm(document.getElementById('contact-container'));

            // Intersection Observer pour les animations au scroll
            const observerOptions = {
                root: null,
                threshold: 0.2,
            };
            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);
            document.querySelectorAll('.memory-entry, .blog-post, .fade-in').forEach(el => observer.observe(el));
            
            // Gestion du mode sombre
            const themeToggleBtn = document.getElementById('theme-toggle');
            const storedTheme = localStorage.getItem('theme');
            if (storedTheme === 'dark') {
                document.body.classList.add('dark-mode');
                themeToggleBtn.innerHTML = '☀️';
            }

            themeToggleBtn.addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                const isDarkMode = document.body.classList.contains('dark-mode');
                localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
                themeToggleBtn.innerHTML = isDarkMode ? '☀️' : '🌙';
            });
            
            // Gestion du formulaire de contact
            const contactForm = document.querySelector('#contact-container form');
            contactForm.addEventListener('submit', (e) => {
                e.preventDefault();
                alert('Merci pour votre message ! Il est bien arrivé au cœur de notre cocon familial.');
                contactForm.reset();
            });
        });
    </script>
</body>
</html>
